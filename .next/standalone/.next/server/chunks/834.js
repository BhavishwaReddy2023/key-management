"use strict";exports.id=834,exports.ids=[834],exports.modules={93834:(a,b,c)=>{c.d(b,{connectDB:()=>h});var d=c(56037),e=c.n(d);let f=process.env.MONGODB_URI||"mongodb://localhost:27017/vnr-key-management";if(!f)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let g=global.mongoose;async function h(){if(g.conn)return g.conn;g.promise||(g.promise=e().connect(f,{bufferCommands:!1,maxPoolSize:10,serverSelectionTimeoutMS:5e3,socketTimeoutMS:45e3,family:4}).then(a=>(console.log("✅ Connected to MongoDB"),a)).catch(a=>{throw console.error("❌ MongoDB connection error:",a),a}));try{g.conn=await g.promise}catch(a){throw g.promise=null,a}return g.conn}async function i(){g.conn&&(await g.conn.disconnect(),g.conn=null,g.promise=null,console.log("\uD83D\uDD0C Disconnected from MongoDB"))}g||(g=global.mongoose={conn:null,promise:null}),e().connection.on("connected",()=>{console.log("\uD83D\uDD17 Mongoose connected to MongoDB")}),e().connection.on("error",a=>{console.error("❌ Mongoose connection error:",a)}),e().connection.on("disconnected",()=>{console.log("\uD83D\uDD0C Mongoose disconnected from MongoDB")}),process.on("SIGINT",async()=>{await i(),process.exit(0)})}};