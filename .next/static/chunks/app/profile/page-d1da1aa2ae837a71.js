(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{464:(e,s,r)=>{"use strict";r.d(s,{DD:()=>g,HP:()=>y,MJ:()=>u,gX:()=>x,hw:()=>h,qb:()=>m});var t=r(5155),l=r(2115),a=r(2108),i=r(5695),c=r(3169);let n=()=>(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),d=e=>{let{requiredRole:s,userRole:r}=e;return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,t.jsx)("div",{className:"bg-red-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 mb-6",children:[(0,t.jsxs)("p",{children:["Required role: ",(0,t.jsx)("span",{className:"font-semibold",children:Array.isArray(s)?s.join(" or "):s})]}),(0,t.jsxs)("p",{children:["Your role: ",(0,t.jsx)("span",{className:"font-semibold",children:r||"None"})]})]}),(0,t.jsx)("button",{onClick:()=>window.history.back(),className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors",children:"Go Back"})]})})},o=e=>{let{children:s,requiredRole:r=null,requiredRoles:o=null,redirectTo:x="/login",fallback:u=null}=e,{data:m,status:h}=(0,a.useSession)(),{user:g,loading:y,hasRole:j,hasAnyRole:b}=(0,c.As)(),f=(0,i.useRouter)();if((0,l.useEffect)(()=>{if(console.log("\uD83D\uDEE1️ ProtectedRoute: Auth state check:",{session:!!m,status:h,loading:y,userRole:null==g?void 0:g.role,requiredRole:r,requiredRoles:o,userEmail:null==g?void 0:g.email}),"loading"===h||y)return void console.log("\uD83D\uDEE1️ ProtectedRoute: Still loading, waiting...");if(!m||!g){console.log("\uD83D\uDEE1️ ProtectedRoute: Not authenticated, redirecting to login"),f.push(x);return}return r&&(null==g?void 0:g.role)!==r?void console.log("\uD83D\uDEE1️ ProtectedRoute: Role check failed for single role:",{userRole:null==g?void 0:g.role,requiredRole:r}):o&&!o.includes(null==g?void 0:g.role)?void console.log("\uD83D\uDEE1️ ProtectedRoute: Role check failed for multiple roles:",{userRole:null==g?void 0:g.role,requiredRoles:o,includes:o.includes(null==g?void 0:g.role)}):void console.log("\uD83D\uDEE1️ ProtectedRoute: All checks passed, rendering content")},[m,h,y,null==g?void 0:g.role,r,o,f,x]),"loading"===h||y)return u||(0,t.jsx)(n,{});if(!m||!g)return null;let p=o||r;return!p||(o?b(o):j(r))?s:(0,t.jsx)(d,{requiredRole:p,userRole:null==g?void 0:g.role})},x=e=>{let{children:s,...r}=e;return(0,t.jsx)(o,{requiredRoles:["faculty","hod"],...r,children:s})},u=e=>{let{children:s,...r}=e;return(0,t.jsx)(o,{requiredRoles:["security","security_head"],...r,children:s})},m=e=>{let{children:s,...r}=e;return(0,t.jsx)(o,{requiredRole:"security_head",...r,children:s})},h=e=>{let{children:s,...r}=e;return(0,t.jsx)(o,{requiredRole:"admin",...r,children:s})},g=e=>{let{children:s,...r}=e;return(0,t.jsx)(o,{requiredRole:"hod",...r,children:s})},y=e=>{let{children:s,...r}=e;return(0,t.jsx)(o,{...r,children:s})}},2725:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>y});var t=r(5155),l=r(2115),a=r(5695),i=r(1007),c=r(5525),n=r(9397),d=r(381),o=r(5169),x=r(9074),u=r(2919),m=r(3169),h=r(464),g=r(6826);let y=()=>{let{user:e,logout:s}=(0,m.As)(),r=(0,a.useRouter)(),[y,j]=(0,l.useState)(!1),[b,f]=(0,l.useState)("profile"),p=e=>{switch(e){case"faculty":return"Faculty Member";case"faculty_lab_staff":return"Faculty Lab Staff";case"hod":return"Head of Department";case"security_staff":return"Security Personnel";case"security_incharge":return"Security Incharge";default:return e}},v=e=>{switch(e){case"faculty":case"faculty_lab_staff":return(0,t.jsx)(i.A,{className:"h-5 w-5 text-primary-600"});case"hod":return(0,t.jsx)(i.A,{className:"h-5 w-5 text-purple-600"});case"security_staff":return(0,t.jsx)(c.A,{className:"h-5 w-5 text-green-600"});case"security_incharge":return(0,t.jsx)(c.A,{className:"h-5 w-5 text-purple-600"});default:return(0,t.jsx)(i.A,{className:"h-5 w-5 text-gray-600"})}},N=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",w=[{id:"profile",label:"Profile",icon:i.A},{id:"activity",label:"Activity",icon:n.A},{id:"settings",label:"Settings",icon:d.A}];return(0,t.jsx)(h.HP,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("button",{onClick:()=>{switch(null==e?void 0:e.role){case"faculty":case"faculty_lab_staff":case"hod":r.push("/faculty");break;case"security_staff":r.push("/security");break;case"security_incharge":r.push("/securityincharge");break;default:r.push("/")}},className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,t.jsx)(o.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Back to Dashboard"})]})}),(0,t.jsx)(g.$n,{onClick:s,variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Logout"})]})})}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(i.A,{className:"h-12 w-12 text-gray-500"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:null==e?void 0:e.userId}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[v(null==e?void 0:e.role),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"faculty":return"bg-primary-100 text-primary-800";case"security":return"bg-green-100 text-green-800";case"security-head":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(null==e?void 0:e.role)),children:p(null==e?void 0:e.role)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-2 text-sm text-gray-600",children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Member since ",N(null==e?void 0:e.createdAt)]})]})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"flex space-x-8 px-6",children:w.map(e=>{let s=e.icon;return(0,t.jsxs)("button",{onClick:()=>f(e.id),className:"flex items-center space-x-2 py-4 border-b-2 font-medium text-sm transition-colors ".concat(b===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,t.jsx)(s,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.label})]},e.id)})})}),(0,t.jsxs)("div",{className:"p-6",children:["profile"===b&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User ID"}),(0,t.jsx)("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-900",children:null==e?void 0:e.userId})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),(0,t.jsxs)("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-900 flex items-center space-x-2",children:[v(null==e?void 0:e.role),(0,t.jsx)("span",{children:p(null==e?void 0:e.role)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),(0,t.jsx)("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Member Since"}),(0,t.jsx)("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-900",children:N(null==e?void 0:e.createdAt)})]})]})]}),"activity"===b&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Activity"}),(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(n.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{children:"Activity tracking coming soon..."})]})]}),"settings"===b&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Account Settings"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Change Password"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Update your account password"})]})]}),(0,t.jsx)(g.$n,{variant:"outline",size:"sm",children:"Change"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(d.A,{className:"h-5 w-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Preferences"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your account preferences"})]})]}),(0,t.jsx)(g.$n,{variant:"outline",size:"sm",children:"Manage"})]})]})]})]})]})]})]})})}},9675:(e,s,r)=>{Promise.resolve().then(r.bind(r,2725))}},e=>{e.O(0,[96,826,358],()=>e(e.s=9675)),_N_E=e.O()}]);