(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71],{61:(e,t,r)=>{let n=r(1640);function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=n.mod(t,this.genPoly),a=this.degree-r.length;if(a>0){let e=new Uint8Array(this.degree);return e.set(r,a),e}return r},e.exports=a},255:(e,t,r)=>{"use strict";function n(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return n}}),r(5155),r(7650),r(5744),r(589)},375:(e,t,r)=>{var n=r(7476);function a(){var t,r,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",i=s.toStringTag||"@@toStringTag";function l(e,a,s,o){var i=Object.create((a&&a.prototype instanceof u?a:u).prototype);return n(i,"_invoke",function(e,n,a){var s,o,i,l=0,u=a||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,r){return s=e,o=0,i=t,f.n=r,c}};function h(e,n){for(o=e,i=n,r=0;!d&&l&&!a&&r<u.length;r++){var a,s=u[r],h=f.p,p=s[2];e>3?(a=p===n)&&(i=s[(o=s[4])?5:(o=3,3)],s[4]=s[5]=t):s[0]<=h&&((a=e<2&&h<s[1])?(o=0,f.v=n,f.n=s[1]):h<p&&(a=e<3||s[0]>n||n>p)&&(s[4]=e,s[5]=n,f.n=p,o=0))}if(a||e>1)return c;throw d=!0,n}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),o=u,i=p;(r=o<2?t:i)||!d;){s||(o?o<3?(o>1&&(f.n=-1),h(o,i)):f.n=i:f.v=i);try{if(l=2,s){if(o||(a="next"),r=s[a]){if(!(r=r.call(s,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,o<2&&(o=0)}else 1===o&&(r=s.return)&&r.call(s),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);s=t}else if((r=(d=f.n<0)?i:e.call(n,f))!==c)break}catch(e){s=t,o=1,i=e}finally{l=1}}return{value:r,done:d}}}(e,s,o),!0),i}var c={};function u(){}function d(){}function f(){}r=Object.getPrototypeOf;var h=f.prototype=u.prototype=Object.create([][o]?r(r([][o]())):(n(r={},o,function(){return this}),r));function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e}return d.prototype=f,n(h,"constructor",f),n(f,"constructor",d),d.displayName="GeneratorFunction",n(f,i,"GeneratorFunction"),n(h),n(h,i,"Generator"),n(h,o,function(){return this}),n(h,"toString",function(){return"[object Generator]"}),(e.exports=a=function(){return{w:l,m:p}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},381:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},464:(e,t,r)=>{"use strict";r.d(t,{DD:()=>m,HP:()=>x,MJ:()=>f,gX:()=>d,hw:()=>p,qb:()=>h});var n=r(5155),a=r(2115),s=r(2108),o=r(5695),i=r(8540);let l=()=>(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),c=e=>{let{requiredRole:t,userRole:r}=e;return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,n.jsx)("div",{className:"bg-red-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),(0,n.jsxs)("div",{className:"text-sm text-gray-500 mb-6",children:[(0,n.jsxs)("p",{children:["Required role: ",(0,n.jsx)("span",{className:"font-semibold",children:Array.isArray(t)?t.join(" or "):t})]}),(0,n.jsxs)("p",{children:["Your role: ",(0,n.jsx)("span",{className:"font-semibold",children:r||"None"})]})]}),(0,n.jsx)("button",{onClick:()=>window.history.back(),className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors",children:"Go Back"})]})})},u=e=>{let{children:t,requiredRole:r=null,requiredRoles:u=null,redirectTo:d="/login",fallback:f=null}=e,{data:h,status:p}=(0,s.useSession)(),{user:m,loading:x,hasRole:y,hasAnyRole:g}=(0,i.As)(),v=(0,o.useRouter)();if((0,a.useEffect)(()=>{if(console.log("\uD83D\uDEE1️ ProtectedRoute: Auth state check:",{session:!!h,status:p,loading:x,userRole:null==m?void 0:m.role,requiredRole:r,requiredRoles:u,userEmail:null==m?void 0:m.email}),"loading"===p||x)return void console.log("\uD83D\uDEE1️ ProtectedRoute: Still loading, waiting...");if(!h||!m){console.log("\uD83D\uDEE1️ ProtectedRoute: Not authenticated, redirecting to login"),v.push(d);return}return r&&(null==m?void 0:m.role)!==r?void console.log("\uD83D\uDEE1️ ProtectedRoute: Role check failed for single role:",{userRole:null==m?void 0:m.role,requiredRole:r}):u&&!u.includes(null==m?void 0:m.role)?void console.log("\uD83D\uDEE1️ ProtectedRoute: Role check failed for multiple roles:",{userRole:null==m?void 0:m.role,requiredRoles:u,includes:u.includes(null==m?void 0:m.role)}):void console.log("\uD83D\uDEE1️ ProtectedRoute: All checks passed, rendering content")},[h,p,x,null==m?void 0:m.role,r,u,v,d]),"loading"===p||x)return f||(0,n.jsx)(l,{});if(!h||!m)return null;let b=u||r;return!b||(u?g(u):y(r))?t:(0,n.jsx)(c,{requiredRole:b,userRole:null==m?void 0:m.role})},d=e=>{let{children:t,...r}=e;return(0,n.jsx)(u,{requiredRoles:["faculty","hod"],...r,children:t})},f=e=>{let{children:t,...r}=e;return(0,n.jsx)(u,{requiredRoles:["security","security_head"],...r,children:t})},h=e=>{let{children:t,...r}=e;return(0,n.jsx)(u,{requiredRole:"security_head",...r,children:t})},p=e=>{let{children:t,...r}=e;return(0,n.jsx)(u,{requiredRole:"admin",...r,children:t})},m=e=>{let{children:t,...r}=e;return(0,n.jsx)(u,{requiredRole:"hod",...r,children:t})},x=e=>{let{children:t,...r}=e;return(0,n.jsx)(u,{...r,children:t})}},519:(e,t,r)=>{let n=r(8976),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case n.L:return a[(e-1)*4+0];case n.M:return a[(e-1)*4+1];case n.Q:return a[(e-1)*4+2];case n.H:return a[(e-1)*4+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return s[(e-1)*4+0];case n.M:return s[(e-1)*4+1];case n.Q:return s[(e-1)*4+2];case n.H:return s[(e-1)*4+3];default:return}}},645:(e,t,r)=>{let n=r(6087).getSymbolSize;t.getPositions=function(e){let t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},646:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;let r=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let n=new URL(null!=(t=e)?t:r),a=("/"===n.pathname?r.pathname:n.pathname).replace(/\/$/,""),s=`${n.origin}${a}`;return{origin:n.origin,host:n.host,path:a,base:s,toString:()=>s}}},908:(e,t)=>{function r(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:n,scale:n?4:a,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,r){let n=t.getScale(e,r);return Math.floor((e+2*r.margin)*n)},t.qrToImageData=function(e,r,n){let a=r.modules.size,s=r.modules.data,o=t.getScale(a,n),i=Math.floor((a+2*n.margin)*o),l=n.margin*o,c=[n.color.light,n.color.dark];for(let t=0;t<i;t++)for(let r=0;r<i;r++){let u=(t*i+r)*4,d=n.color.light;t>=l&&r>=l&&t<i-l&&r<i-l&&(d=c[+!!s[Math.floor((t-l)/o)*a+Math.floor((r-l)/o)]]),e[u++]=d.r,e[u++]=d.g,e[u++]=d.b,e[u]=d.a}}},1007:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1243:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1390:(e,t,r)=>{var n=r(2977)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},1640:(e,t,r)=>{let n=r(7354);t.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let a=0;a<e.length;a++)for(let s=0;s<t.length;s++)r[a+s]^=n.mul(e[a],t[s]);return r},t.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let e=r[0];for(let a=0;a<t.length;a++)r[a]^=n.mul(t[a],e);let a=0;for(;a<r.length&&0===r[a];)a++;r=r.slice(a)}return r},t.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let a=0;a<e;a++)r=t.mul(r,new Uint8Array([1,n.exp(a)]));return r}},1685:(e,t)=>{let r="[0-9]+",n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",a="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=RegExp(n,"g"),t.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=RegExp(a,"g"),t.NUMERIC=RegExp(r,"g"),t.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let s=RegExp("^"+n+"$"),o=RegExp("^"+r+"$"),i=RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return s.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return i.test(e)}},1727:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,o,i=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},1883:(e,t,r)=>{"use strict";var n=r(6620);Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedStrategy=t.UnknownError=t.OAuthCallbackError=t.MissingSecret=t.MissingAuthorize=t.MissingAdapterMethods=t.MissingAdapter=t.MissingAPIRoute=t.InvalidCallbackUrl=t.AccountNotLinkedError=void 0,t.adapterErrorHandler=function(e,t){if(e)return Object.keys(e).reduce(function(r,n){return r[n]=(0,s.default)(a.default.mark(function r(){var s,o,i,l,c,u=arguments;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(r.prev=0,o=Array(s=u.length),i=0;i<s;i++)o[i]=u[i];return t.debug("adapter_".concat(n),{args:o}),l=e[n],r.next=6,l.apply(void 0,o);case 6:return r.abrupt("return",r.sent);case 9:throw r.prev=9,r.t0=r.catch(0),t.error("adapter_error_".concat(n),r.t0),(c=new p(r.t0)).name="".concat(x(n),"Error"),c;case 15:case"end":return r.stop()}},r,null,[[0,9]])})),r},{})},t.capitalize=x,t.eventsErrorHandler=function(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=(0,s.default)(a.default.mark(function r(){var s,o=arguments;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=e[n],r.next=4,s.apply(void 0,o);case 4:return r.abrupt("return",r.sent);case 7:r.prev=7,r.t0=r.catch(0),t.error("".concat(m(n),"_EVENT_ERROR"),r.t0);case 10:case"end":return r.stop()}},r,null,[[0,7]])})),r},{})},t.upperSnake=m;var a=n(r(1390)),s=n(r(9165)),o=n(r(3901)),i=n(r(2419)),l=n(r(6045)),c=n(r(4170)),u=n(r(7824)),d=n(r(8683));function f(e,t,r){return t=(0,u.default)(t),(0,c.default)(e,h()?Reflect.construct(t,r||[],(0,u.default)(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}var p=t.UnknownError=function(e){function t(e){var r,n;return(0,i.default)(this,t),(n=f(this,t,[null!=(r=null==e?void 0:e.message)?r:e])).name="UnknownError",n.code=e.code,e instanceof Error&&(n.stack=e.stack),n}return(0,d.default)(t,e),(0,l.default)(t,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,n(r(3131)).default)(Error));function m(e){return e.replace(/([A-Z])/g,"_$1").toUpperCase()}function x(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}t.OAuthCallbackError=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=f(this,t,[].concat(n)),(0,o.default)(e,"name","OAuthCallbackError"),e}return(0,d.default)(t,e),(0,l.default)(t)}(p),t.AccountNotLinkedError=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=f(this,t,[].concat(n)),(0,o.default)(e,"name","AccountNotLinkedError"),e}return(0,d.default)(t,e),(0,l.default)(t)}(p),t.MissingAPIRoute=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=f(this,t,[].concat(n)),(0,o.default)(e,"name","MissingAPIRouteError"),(0,o.default)(e,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),e}return(0,d.default)(t,e),(0,l.default)(t)}(p),t.MissingSecret=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=f(this,t,[].concat(n)),(0,o.default)(e,"name","MissingSecretError"),(0,o.default)(e,"code","NO_SECRET"),e}return(0,d.default)(t,e),(0,l.default)(t)}(p),t.MissingAuthorize=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=f(this,t,[].concat(n)),(0,o.default)(e,"name","MissingAuthorizeError"),(0,o.default)(e,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),e}return(0,d.default)(t,e),(0,l.default)(t)}(p),t.MissingAdapter=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=f(this,t,[].concat(n)),(0,o.default)(e,"name","MissingAdapterError"),(0,o.default)(e,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),e}return(0,d.default)(t,e),(0,l.default)(t)}(p),t.MissingAdapterMethods=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=f(this,t,[].concat(n)),(0,o.default)(e,"name","MissingAdapterMethodsError"),(0,o.default)(e,"code","MISSING_ADAPTER_METHODS_ERROR"),e}return(0,d.default)(t,e),(0,l.default)(t)}(p),t.UnsupportedStrategy=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=f(this,t,[].concat(n)),(0,o.default)(e,"name","UnsupportedStrategyError"),(0,o.default)(e,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),e}return(0,d.default)(t,e),(0,l.default)(t)}(p),t.InvalidCallbackUrl=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=f(this,t,[].concat(n)),(0,o.default)(e,"name","InvalidCallbackUrl"),(0,o.default)(e,"code","INVALID_CALLBACK_URL_ERROR"),e}return(0,d.default)(t,e),(0,l.default)(t)}(p)},2013:(e,t,r)=>{let n=r(908);function a(e,t){let r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function s(e,t,r){let n=e+t;return void 0!==r&&(n+=" "+r),n}t.render=function(e,t,r){let o=n.getOptions(t),i=e.modules.size,l=e.modules.data,c=i+2*o.margin,u=o.color.light.a?"<path "+a(o.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+a(o.color.dark,"stroke")+' d="'+function(e,t,r){let n="",a=0,o=!1,i=0;for(let l=0;l<e.length;l++){let c=Math.floor(l%t),u=Math.floor(l/t);c||o||(o=!0),e[l]?(i++,l>0&&c>0&&e[l-1]||(n+=o?s("M",c+r,.5+u+r):s("m",a,0),a=0,o=!1),c+1<t&&e[l+1]||(n+=s("h",i),i=0)):a++}return n}(l,i,o.margin)+'"/>',f='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+('viewBox="0 0 '+c+" ")+c+'" shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"==typeof r&&r(null,f),f}},2108:(e,t,r)=>{"use strict";var n,a,s,o,i,l=r(9509),c=r(6620),u=r(7382);Object.defineProperty(t,"__esModule",{value:!0});var d={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};t.SessionContext=void 0,t.SessionProvider=function(e){if(!S)throw Error("React Context is unavailable in Server Components");var t,r,n,a,s,o,i=e.children,l=e.basePath,c=e.refetchInterval,u=e.refetchWhenOffline;l&&(E.basePath=l);var d=void 0!==e.session;E._lastSync=d?(0,v.now)():0;var h=x.useState(function(){return d&&(E._session=e.session),e.session}),y=(0,m.default)(h,2),g=y[0],w=y[1],j=x.useState(!d),N=(0,m.default)(j,2),k=N[0],A=N[1];x.useEffect(function(){return E._getSession=(0,p.default)(f.default.mark(function e(){var t,r,n=arguments;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(n.length>0&&void 0!==n[0]?n[0]:{}).event,e.prev=1,!((r="storage"===t)||void 0===E._session)){e.next=10;break}return E._lastSync=(0,v.now)(),e.next=7,M({broadcast:!r});case 7:return E._session=e.sent,w(E._session),e.abrupt("return");case 10:if(!(!t||null===E._session||(0,v.now)()<E._lastSync)){e.next=12;break}return e.abrupt("return");case 12:return E._lastSync=(0,v.now)(),e.next=15,M();case 15:E._session=e.sent,w(E._session),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),C.error("CLIENT_SESSION_ERROR",e.t0);case 22:return e.prev=22,A(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[1,19,22,25]])})),E._getSession(),function(){E._lastSync=0,E._session=void 0,E._getSession=function(){}}},[]),x.useEffect(function(){var e=_.receive(function(){return E._getSession({event:"storage"})});return function(){return e()}},[]),x.useEffect(function(){var t=e.refetchOnWindowFocus,r=void 0===t||t,n=function(){r&&"visible"===document.visibilityState&&E._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",n,!1),function(){return document.removeEventListener("visibilitychange",n,!1)}},[e.refetchOnWindowFocus]);var R=(t=x.useState("undefined"!=typeof navigator&&navigator.onLine),n=(r=(0,m.default)(t,2))[0],a=r[1],s=function(){return a(!0)},o=function(){return a(!1)},x.useEffect(function(){return window.addEventListener("online",s),window.addEventListener("offline",o),function(){window.removeEventListener("online",s),window.removeEventListener("offline",o)}},[]),n),P=!1!==u||R;x.useEffect(function(){if(c&&P){var e=setInterval(function(){E._session&&E._getSession({event:"poll"})},1e3*c);return function(){return clearInterval(e)}}},[c,P]);var T=x.useMemo(function(){return{data:g,status:k?"loading":g?"authenticated":"unauthenticated",update:function(e){return(0,p.default)(f.default.mark(function t(){var r;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(k||!g)){t.next=2;break}return t.abrupt("return");case 2:return A(!0),t.t0=v.fetchData,t.t1=E,t.t2=C,t.next=8,O();case 8:return t.t3=t.sent,t.t4=e,t.t5={csrfToken:t.t3,data:t.t4},t.t6={body:t.t5},t.t7={req:t.t6},t.next=15,(0,t.t0)("session",t.t1,t.t2,t.t7);case 15:return r=t.sent,A(!1),r&&(w(r),_.post({event:"session",data:{trigger:"getSession"}})),t.abrupt("return",r);case 19:case"end":return t.stop()}},t)}))()}}},[g,k]);return(0,b.jsx)(S.Provider,{value:T,children:i})},t.getCsrfToken=O,t.getProviders=T,t.getSession=M,t.signIn=function(e,t,r){return L.apply(this,arguments)},t.signOut=function(e){return D.apply(this,arguments)},t.useSession=function(e){if(!S)throw Error("React Context is unavailable in Server Components");var t=x.useContext(S),r=null!=e?e:{},n=r.required,a=r.onUnauthenticated,s=n&&"unauthenticated"===t.status;return(x.useEffect(function(){if(s){var e="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));a?a():window.location.href=e}},[s,a]),s)?{data:t.data,update:t.update,status:"loading"}:t};var f=c(r(1390)),h=c(r(3901)),p=c(r(9165)),m=c(r(5593)),x=N(r(2115)),y=N(r(5146)),g=c(r(837)),v=r(2630),b=r(5155),w=r(2477);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=u(e)&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&({}).hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}Object.keys(w).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(d,e))&&(e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))});var E={baseUrl:(0,g.default)(null!=(n=l.env.NEXTAUTH_URL)?n:l.env.VERCEL_URL).origin,basePath:(0,g.default)(l.env.NEXTAUTH_URL).path,baseUrlServer:(0,g.default)(null!=(a=null!=(s=l.env.NEXTAUTH_URL_INTERNAL)?s:l.env.NEXTAUTH_URL)?a:l.env.VERCEL_URL).origin,basePathServer:(0,g.default)(null!=(o=l.env.NEXTAUTH_URL_INTERNAL)?o:l.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},_=(0,v.BroadcastChannel)(),C=(0,y.proxyLogger)(y.default,E.basePath),S=t.SessionContext=null==(i=x.createContext)?void 0:i.call(x,void 0);function M(e){return R.apply(this,arguments)}function R(){return(R=(0,p.default)(f.default.mark(function e(t){var r,n;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.fetchData)("session",E,C,t);case 2:return n=e.sent,(null==(r=null==t?void 0:t.broadcast)||r)&&_.post({event:"session",data:{trigger:"getSession"}}),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return P.apply(this,arguments)}function P(){return(P=(0,p.default)(f.default.mark(function e(t){var r;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.fetchData)("csrf",E,C,t);case 2:return r=e.sent,e.abrupt("return",null==r?void 0:r.csrfToken);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return I.apply(this,arguments)}function I(){return(I=(0,p.default)(f.default.mark(function e(){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.fetchData)("providers",E,C);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(){return(L=(0,p.default)(f.default.mark(function e(t,r,n){var a,s,o,i,l,c,u,d,h,p,m,x,y,g,b,w,j;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0===(s=(a=null!=r?r:{}).callbackUrl)?window.location.href:s,l=void 0===(i=a.redirect)||i,c=(0,v.apiBaseUrl)(E),e.next=4,T();case 4:if(u=e.sent){e.next=8;break}return window.location.href="".concat(c,"/error"),e.abrupt("return");case 8:if(!(!t||!(t in u))){e.next=11;break}return window.location.href="".concat(c,"/signin?").concat(new URLSearchParams({callbackUrl:o})),e.abrupt("return");case 11:return d="credentials"===u[t].type,h="email"===u[t].type,p=d||h,m="".concat(c,"/").concat(d?"callback":"signin","/").concat(t),x="".concat(m).concat(n?"?".concat(new URLSearchParams(n)):""),e.t0=fetch,e.t1=x,e.t2={"Content-Type":"application/x-www-form-urlencoded"},e.t3=URLSearchParams,e.t4=A,e.t5=A({},r),e.t6={},e.next=25,O();case 25:return e.t7=e.sent,e.t8=o,e.t9={csrfToken:e.t7,callbackUrl:e.t8,json:!0},e.t10=(0,e.t4)(e.t5,e.t6,e.t9),e.t11=new e.t3(e.t10),e.t12={method:"post",headers:e.t2,body:e.t11},e.next=33,(0,e.t0)(e.t1,e.t12);case 33:return y=e.sent,e.next=36,y.json();case 36:if(g=e.sent,!(l||!p)){e.next=42;break}return w=null!=(b=g.url)?b:o,window.location.href=w,w.includes("#")&&window.location.reload(),e.abrupt("return");case 42:if(j=new URL(g.url).searchParams.get("error"),!y.ok){e.next=46;break}return e.next=46,E._getSession({event:"storage"});case 46:return e.abrupt("return",{error:j,status:y.status,ok:y.ok,url:j?null:g.url});case 47:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(){return(D=(0,p.default)(f.default.mark(function e(t){var r,n,a,s,o,i,l,c,u;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(n=(null!=t?t:{}).callbackUrl)?window.location.href:n,s=(0,v.apiBaseUrl)(E),e.t0={"Content-Type":"application/x-www-form-urlencoded"},e.t1=URLSearchParams,e.next=6,O();case 6:return e.t2=e.sent,e.t3=a,e.t4={csrfToken:e.t2,callbackUrl:e.t3,json:!0},e.t5=new e.t1(e.t4),o={method:"post",headers:e.t0,body:e.t5},e.next=13,fetch("".concat(s,"/signout"),o);case 13:return i=e.sent,e.next=16,i.json();case 16:if(l=e.sent,_.post({event:"session",data:{trigger:"signout"}}),!(null==(r=null==t?void 0:t.redirect)||r)){e.next=23;break}return u=null!=(c=l.url)?c:a,window.location.href=u,u.includes("#")&&window.location.reload(),e.abrupt("return");case 23:return e.next=25,E._getSession({event:"storage"});case 25:return e.abrupt("return",l);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}},2146:(e,t,r)=>{"use strict";function n(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}}),r(5262)},2202:(e,t,r)=>{let n=r(6087),a=r(519),s=r(8976),o=r(3585),i=r(9343),l=n.getBCHDigit(7973);function c(e,t){return o.getCharCountIndicator(e,t)+4}t.from=function(e,t){return i.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,r){if(!i.isValid(e))throw Error("Invalid QR Code version");void 0===r&&(r=o.BYTE);let s=(n.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t))*8;if(r===o.MIXED)return s;let l=s-c(r,e);switch(r){case o.NUMERIC:return Math.floor(l/10*3);case o.ALPHANUMERIC:return Math.floor(l/11*2);case o.KANJI:return Math.floor(l/13);case o.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,r){let n,a=s.from(r,s.M);if(Array.isArray(e)){if(e.length>1){for(let r=1;r<=40;r++)if(function(e,t){let r=0;return e.forEach(function(e){let n=c(e.mode,t);r+=n+e.getBitsLength()}),r}(e,r)<=t.getCapacity(r,a,o.MIXED))return r;return}if(0===e.length)return 1;n=e[0]}else n=e;return function(e,r,n){for(let a=1;a<=40;a++)if(r<=t.getCapacity(a,n,e))return a}(n.mode,n.getLength(),a)},t.getEncodedBits=function(e){if(!i.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-l>=0;)t^=7973<<n.getBCHDigit(t)-l;return e<<12|t}},2402:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},2419:e=>{e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},2477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2525:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2630:(e,t,r)=>{"use strict";var n=r(6620);Object.defineProperty(t,"__esModule",{value:!0}),t.BroadcastChannel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"nextauth.message";return{receive:function(t){var r=function(r){if(r.key===e){var n,a=JSON.parse(null!=(n=r.newValue)?n:"{}");(null==a?void 0:a.event)==="session"&&null!=a&&a.data&&t(a)}};return window.addEventListener("storage",r),function(){return window.removeEventListener("storage",r)}},post:function(t){if("undefined"!=typeof window)try{localStorage.setItem(e,JSON.stringify(l(l({},t),{},{timestamp:d()})))}catch(e){}}}},t.apiBaseUrl=u,t.fetchData=function(e,t,r){return c.apply(this,arguments)},t.now=d;var a=n(r(1390)),s=n(r(3901)),o=n(r(9165));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(){return(c=(0,o.default)(a.default.mark(function e(t,r,n){var s,o,i,c,d,f,h,p,m,x=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(s=x.length>3&&void 0!==x[3]?x[3]:{}).ctx,c=void 0===(i=s.req)?null==o?void 0:o.req:i,d="".concat(u(r),"/").concat(t),e.prev=2,h={headers:l({"Content-Type":"application/json"},null!=c&&null!=(f=c.headers)&&f.cookie?{cookie:c.headers.cookie}:{})},null!=c&&c.body&&(h.body=JSON.stringify(c.body),h.method="POST"),e.next=7,fetch(d,h);case 7:return p=e.sent,e.next=10,p.json();case 10:if(m=e.sent,p.ok){e.next=13;break}throw m;case 13:return e.abrupt("return",Object.keys(m).length>0?m:null);case 16:return e.prev=16,e.t0=e.catch(2),n.error("CLIENT_FETCH_ERROR",{error:e.t0,url:d}),e.abrupt("return",null);case 20:case"end":return e.stop()}},e,null,[[2,16]])}))).apply(this,arguments)}function u(e){return"undefined"==typeof window?"".concat(e.baseUrlServer).concat(e.basePathServer):e.basePath}function d(){return Math.floor(Date.now()/1e3)}},2920:(e,t,r)=>{let n=r(3585),a=r(6444),s=r(9184),o=r(7487),i=r(5580),l=r(1685),c=r(6087),u=r(8521);function d(e){return unescape(encodeURIComponent(e)).length}function f(e,t,r){let n,a=[];for(;null!==(n=e.exec(r));)a.push({data:n[0],index:n.index,mode:t,length:n[0].length});return a}function h(e){let t,r,a=f(l.NUMERIC,n.NUMERIC,e),s=f(l.ALPHANUMERIC,n.ALPHANUMERIC,e);return c.isKanjiModeEnabled()?(t=f(l.BYTE,n.BYTE,e),r=f(l.KANJI,n.KANJI,e)):(t=f(l.BYTE_KANJI,n.BYTE,e),r=[]),a.concat(s,t,r).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function p(e,t){switch(t){case n.NUMERIC:return a.getBitsLength(e);case n.ALPHANUMERIC:return s.getBitsLength(e);case n.KANJI:return i.getBitsLength(e);case n.BYTE:return o.getBitsLength(e)}}function m(e,t){let r,l=n.getBestModeForData(e);if((r=n.from(t,l))!==n.BYTE&&r.bit<l.bit)throw Error('"'+e+'" cannot be encoded with mode '+n.toString(r)+".\n Suggested mode is: "+n.toString(l));switch(r===n.KANJI&&!c.isKanjiModeEnabled()&&(r=n.BYTE),r){case n.NUMERIC:return new a(e);case n.ALPHANUMERIC:return new s(e);case n.KANJI:return new i(e);case n.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e},[])},t.fromString=function(e,r){let a=function(e,t){let r={},a={start:{}},s=["start"];for(let o=0;o<e.length;o++){let i=e[o],l=[];for(let e=0;e<i.length;e++){let c=i[e],u=""+o+e;l.push(u),r[u]={node:c,lastCount:0},a[u]={};for(let e=0;e<s.length;e++){let o=s[e];r[o]&&r[o].node.mode===c.mode?(a[o][u]=p(r[o].lastCount+c.length,c.mode)-p(r[o].lastCount,c.mode),r[o].lastCount+=c.length):(r[o]&&(r[o].lastCount=c.length),a[o][u]=p(c.length,c.mode)+4+n.getCharCountIndicator(c.mode,t))}}s=l}for(let e=0;e<s.length;e++)a[s[e]].end=0;return{map:a,table:r}}(function(e){let t=[];for(let r=0;r<e.length;r++){let a=e[r];switch(a.mode){case n.NUMERIC:t.push([a,{data:a.data,mode:n.ALPHANUMERIC,length:a.length},{data:a.data,mode:n.BYTE,length:a.length}]);break;case n.ALPHANUMERIC:t.push([a,{data:a.data,mode:n.BYTE,length:a.length}]);break;case n.KANJI:t.push([a,{data:a.data,mode:n.BYTE,length:d(a.data)}]);break;case n.BYTE:t.push([{data:a.data,mode:n.BYTE,length:d(a.data)}])}}return t}(h(e,c.isKanjiModeEnabled())),r),s=u.find_path(a.map,"start","end"),o=[];for(let e=1;e<s.length-1;e++)o.push(a.table[s[e]].node);return t.fromArray(o.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},t.rawSplit=function(e){return t.fromArray(h(e,c.isKanjiModeEnabled()))}},2977:(e,t,r)=>{var n=r(2402),a=r(375),s=r(7149),o=r(8977),i=r(5591),l=r(8079),c=r(4801);function u(){"use strict";var t=a(),r=t.m(u),d=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function f(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))}var h={throw:1,return:2,break:3,continue:3};function p(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,h[e],t)},delegateYield:function(e,a,s){return t.resultName=a,r(n.d,c(e),s)},finish:function(e){return r(n.f,e)}},r=function(e,r,a){n.p=t.prev,n.n=t.next;try{return e(r,a)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=u=function(){return{wrap:function(e,r,n,a){return t.w(p(e),r,n,a&&a.reverse())},isGeneratorFunction:f,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,a){return(f(t)?o:s)(p(e),t,r,n,a)},keys:l,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},3131:(e,t,r)=>{var n=r(7824),a=r(9828),s=r(5440),o=r(6268);function i(t){var r="function"==typeof Map?new Map:void 0;return e.exports=i=function(e){if(null===e||!s(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,i(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3202:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,DP:()=>o});var n=r(5155),a=r(2115);let s=(0,a.createContext)({theme:"light",toggleTheme:()=>{},setTheme:()=>{}}),o=()=>{let e=(0,a.useContext)(s);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e},i=e=>{let{children:t}=e,[r,o]=(0,a.useState)("light"),[i,l]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=localStorage.getItem("vnr-key-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o(e||t),l(!0)},[]),(0,a.useEffect)(()=>{if(i){let e=document.documentElement;"dark"===r?e.classList.add("dark"):e.classList.remove("dark"),localStorage.setItem("vnr-key-theme",r)}},[r,i]),i)?(0,n.jsx)(s.Provider,{value:{theme:r,toggleTheme:()=>{o(e=>"light"===e?"dark":"light")},setTheme:e=>{o(e)}},children:t}):(0,n.jsx)("div",{style:{visibility:"hidden"},children:t})}},3227:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},3294:e=>{function t(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(e.exports=t=function(){return!!r},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3539:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},3585:(e,t,r)=>{let n=r(9343),a=r(1685);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!n.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,r){if(t.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw Error("Unknown mode: "+e)}}catch(e){return r}}},3815:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var n=r(5155),a=r(464),s=r(2115),o=r(9803),i=r(9869),l=r(3227),c=r(9676),u=r(7924),d=r(9946);let f=(0,d.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),h=(0,d.A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var p=r(4186);let m=(0,d.A)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),x=(0,d.A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var y=r(3861),g=r(5695),v=r(5738),b=r(8540),w=r(9130),j=r(1243);let N=(0,d.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),k=(0,d.A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var A=r(6862);let E=e=>{let{isOpen:t,onClose:r,keyData:a,mode:i="collection"}=e,[l,c]=(0,s.useState)(""),[u,d]=(0,s.useState)(600),[f,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&a&&(g(),b())},[t,a]);let g=async()=>{try{let e={keyId:a.id,facultyId:a.facultyId||"faculty-001",action:i,timestamp:Date.now(),expiresAt:Date.now()+6e5},t=JSON.stringify(e),r=await A.toDataURL(t,{width:300,margin:2,color:{dark:"#1f2937",light:"#ffffff"}});c(r)}catch(e){console.error("Error generating QR code:",e)}},b=()=>{d(600),y(!1);let e=setInterval(()=>{d(t=>t<=1?(y(!0),clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)},w=async()=>{try{await navigator.clipboard.writeText(l)}catch(e){console.error("Failed to copy QR code:",e)}},E=async()=>{if(navigator.share)try{await navigator.share({title:"QR Code - ".concat(null==a?void 0:a.keyName),text:"QR code for ".concat(i," of ").concat(null==a?void 0:a.keyName),url:l})}catch(e){console.error("Error sharing:",e)}};return a?(0,n.jsx)(v.aF,{isOpen:t,onClose:r,title:"".concat("collection"===i?"Collect":"Deposit"," Key"),size:"md",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(v.Zp,{role:"faculty",padding:"sm",children:(0,n.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-faculty rounded-lg flex items-center justify-center",children:(0,n.jsx)(o.A,{className:"h-5 w-5 text-white"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"font-semibold text-primary",children:a.keyName}),(0,n.jsxs)("div",{className:"space-y-1 text-sm text-secondary",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(h,{className:"h-3 w-3"}),(0,n.jsxs)("span",{children:[a.labName," (",a.labNumber,")"]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(v.Ex,{variant:"permanent"===a.accessType?"success":"warning",size:"sm",children:a.accessType}),a.isOverdue&&(0,n.jsx)(v.Ex,{variant:"danger",size:"sm",children:"Overdue"})]})]})]})]})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("div",{className:"inline-block p-4 bg-white rounded-2xl shadow-card",children:l?(0,n.jsx)("img",{src:l,alt:"QR Code",className:"w-64 h-64 mx-auto"}):(0,n.jsx)("div",{className:"w-64 h-64 bg-surface-secondary rounded-lg flex items-center justify-center",children:(0,n.jsx)(m,{className:"h-12 w-12 text-muted"})})})}),(0,n.jsx)("div",{className:"text-center",children:f?(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-danger",children:[(0,n.jsx)(j.A,{className:"h-5 w-5"}),(0,n.jsx)("span",{className:"font-medium",children:"QR Code Expired"})]}),(0,n.jsx)(v.$n,{variant:"primary",onClick:()=>{g(),b()},className:"w-full",children:"Generate New QR Code"})]}):(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,n.jsx)(p.A,{className:"h-4 w-4 text-warning"}),(0,n.jsxs)("span",{className:"text-sm text-secondary",children:["Expires in: ",(0,n.jsx)("span",{className:"font-mono font-medium text-warning",children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(u)})]})]}),(0,n.jsxs)("p",{className:"text-xs text-muted",children:["Show this QR code to security for ",i]})]})}),!f&&(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,n.jsx)(v.$n,{variant:"ghost",size:"sm",onClick:w,icon:(0,n.jsx)(N,{className:"h-4 w-4"}),children:"Copy"}),(0,n.jsx)(v.$n,{variant:"ghost",size:"sm",onClick:()=>{let e=document.createElement("a");e.download="qr-".concat(null==a?void 0:a.keyName,"-").concat(i,"-").concat(Date.now(),".png"),e.href=l,e.click()},icon:(0,n.jsx)(k,{className:"h-4 w-4"}),children:"Download"}),(0,n.jsx)(v.$n,{variant:"ghost",size:"sm",onClick:E,icon:(0,n.jsx)(x,{className:"h-4 w-4"}),children:"Share"})]}),(0,n.jsx)(v.Zp,{variant:"info",padding:"sm",children:(0,n.jsxs)("div",{className:"text-sm space-y-2",children:[(0,n.jsx)("h4",{className:"font-medium text-primary",children:"Instructions:"}),(0,n.jsxs)("ul",{className:"space-y-1 text-secondary",children:[(0,n.jsx)("li",{children:"• Present this QR code to security personnel"}),(0,n.jsx)("li",{children:"• QR code is valid for 10 minutes only"}),(0,n.jsxs)("li",{children:["• ","collection"===i?"Collect your key after verification":"Hand over the key after scanning"]}),(0,n.jsx)("li",{children:"• Keep your phone screen bright for easy scanning"})]})]})})]})}):null};var _=r(1007),C=r(4416);let S=(0,d.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),M=e=>{let{isOpen:t,onClose:r,keyData:a,onShare:i}=e,[l,c]=(0,s.useState)(""),[d,f]=(0,s.useState)(null),[m,x]=(0,s.useState)("1"),[y,g]=(0,s.useState)(""),[b]=(0,s.useState)([{id:"fac-001",name:"Dr. John Smith",email:"john.smith@vnrvjiet.in",department:"Computer Science",avatar:null},{id:"fac-002",name:"Prof. Sarah Johnson",email:"sarah.johnson@vnrvjiet.in",department:"Computer Science",avatar:null},{id:"fac-003",name:"Dr. Michael Brown",email:"michael.brown@vnrvjiet.in",department:"Information Technology",avatar:null}]),w=b.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.email.toLowerCase().includes(l.toLowerCase())||e.department.toLowerCase().includes(l.toLowerCase())),j=()=>{f(null),c(""),x("1"),g(""),r()};return a?(0,n.jsx)(v.aF,{isOpen:t,onClose:j,title:"Share Key Access",size:"lg",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(v.Zp,{role:"faculty",padding:"sm",children:(0,n.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-faculty rounded-lg flex items-center justify-center",children:(0,n.jsx)(o.A,{className:"h-5 w-5 text-white"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"font-semibold text-primary",children:a.keyName}),(0,n.jsxs)("div",{className:"space-y-1 text-sm text-secondary",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(h,{className:"h-3 w-3"}),(0,n.jsxs)("span",{children:[a.labName," (",a.labNumber,")"]})]}),(0,n.jsx)(v.Ex,{variant:"permanent"===a.accessType?"success":"warning",size:"sm",children:a.accessType})]})]})]})}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-primary",children:"Select Faculty Member"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted"}),(0,n.jsx)("input",{type:"text",placeholder:"Search faculty by name, email, or department...",value:l,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-surface border border-default rounded-xl focus:ring-2 focus:ring-faculty focus:border-transparent text-primary"})]})]}),(0,n.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[w.map(e=>(0,n.jsx)(v.Zp,{className:"cursor-pointer transition-all duration-200 ".concat((null==d?void 0:d.id)===e.id?"border-faculty bg-faculty/10":"hover:border-faculty/50"),padding:"sm",onClick:()=>f(e),children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-faculty/20 rounded-full flex items-center justify-center",children:(0,n.jsx)(_.A,{className:"h-5 w-5 text-faculty"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h4",{className:"font-medium text-primary",children:e.name}),(0,n.jsx)("p",{className:"text-sm text-secondary",children:e.email}),(0,n.jsx)("p",{className:"text-xs text-muted",children:e.department})]}),(null==d?void 0:d.id)===e.id&&(0,n.jsx)("div",{className:"w-5 h-5 bg-faculty rounded-full flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]})},e.id)),0===w.length&&(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)(_.A,{className:"h-8 w-8 text-muted mx-auto mb-2"}),(0,n.jsx)("p",{className:"text-secondary",children:"No faculty members found"})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-primary",children:"Access Duration"}),(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["1","2","4","8"].map(e=>(0,n.jsxs)(v.$n,{variant:m===e?"primary":"ghost",size:"sm",onClick:()=>x(e),className:"flex items-center justify-center space-x-1",children:[(0,n.jsx)(p.A,{className:"h-3 w-3"}),(0,n.jsxs)("span",{children:[e,"h"]})]},e))})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-primary",children:"Message (Optional)"}),(0,n.jsx)("textarea",{placeholder:"Add a note for the recipient...",value:y,onChange:e=>g(e.target.value),rows:3,className:"w-full px-4 py-3 bg-surface border border-default rounded-xl focus:ring-2 focus:ring-faculty focus:border-transparent text-primary resize-none"})]}),(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)(v.$n,{variant:"ghost",onClick:j,className:"flex-1",icon:(0,n.jsx)(C.A,{className:"h-4 w-4"}),children:"Cancel"}),(0,n.jsx)(v.$n,{variant:"primary",onClick:()=>{d&&(i({keyId:a.id,recipientId:d.id,duration:parseInt(m),message:y.trim(),timestamp:Date.now()}),r(),f(null),c(""),x("1"),g(""))},disabled:!d,className:"flex-1",icon:(0,n.jsx)(S,{className:"h-4 w-4"}),children:"Share Access"})]}),(0,n.jsx)(v.Zp,{variant:"info",padding:"sm",children:(0,n.jsxs)("div",{className:"text-sm space-y-2",children:[(0,n.jsx)("h4",{className:"font-medium text-primary",children:"Sharing Guidelines:"}),(0,n.jsxs)("ul",{className:"space-y-1 text-secondary",children:[(0,n.jsx)("li",{children:"• Shared access is temporary and expires automatically"}),(0,n.jsx)("li",{children:"• You remain responsible for the key during shared access"}),(0,n.jsx)("li",{children:"• The recipient will receive a notification with access details"}),(0,n.jsx)("li",{children:"• You can revoke access at any time from your history"})]})]})})]})}):null},R=()=>{var e;let[t,r]=(0,s.useState)("keys"),[a,d]=(0,s.useState)(""),[j,N]=(0,s.useState)("all"),[k,A]=(0,s.useState)(!1),[_,C]=(0,s.useState)(null),[S,R]=(0,s.useState)(!1),[O,P]=(0,s.useState)(!1),T=(0,g.useRouter)(),{user:I}=(0,b.As)(),{notifications:L,unreadCount:D,markAsRead:U,markAllAsRead:B,deleteNotification:z}=(0,w.E$)(),[F,H]=(0,s.useState)([]),[K,q]=(0,s.useState)([]),[Y,J]=(0,s.useState)(!0),[V,$]=(0,s.useState)(null);(0,s.useEffect)(()=>{Q(),G()},[]);let Q=async()=>{try{let e=await fetch("/api/keys?type=my-keys");if(!e.ok)throw Error("Failed to fetch keys");let t=await e.json();H(t.keys||[])}catch(e){console.error("Error fetching my keys:",e),$("Failed to load your keys")}},G=async()=>{try{let e=await fetch("/api/keys?type=dept-keys");if(!e.ok)throw Error("Failed to fetch department keys");let t=await e.json();q(t.keys||[]),J(!1)}catch(e){console.error("Error fetching department keys:",e),$("Failed to load department keys"),J(!1)}},W=[{id:"keys",label:"Keys",icon:(0,n.jsx)(o.A,{className:"h-5 w-5"}),badge:F.filter(e=>e.isOverdue).length},{id:"deposit",label:"Deposit",icon:(0,n.jsx)(i.A,{className:"h-5 w-5"})},{id:"dept-keys",label:"Dept Keys",icon:(0,n.jsx)(l.A,{className:"h-5 w-5"})},{id:"history",label:"History",icon:(0,n.jsx)(c.A,{className:"h-5 w-5"})}],Z=async e=>{try{let t=await fetch("/api/keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"generate-qr",keyId:e.id,data:{action:"collection"}})});if(!t.ok)throw Error("Failed to generate QR code");let r=await t.json();C({...e,qrData:r.qrData}),R(!0)}catch(e){console.error("Error generating QR code:",e)}},X=async e=>{try{if(!(await fetch("/api/keys/share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"share-key",data:{keyId:_.id,keyName:_.keyName,labName:_.labName,recipientId:e.recipientId,recipientName:e.recipientName,duration:e.duration,message:e.message}})})).ok)throw Error("Failed to share key");Q(),P(!1),C(null)}catch(e){console.error("Error sharing key:",e)}},ee=F.filter(e=>{let t=e.keyName.toLowerCase().includes(a.toLowerCase())||e.labName.toLowerCase().includes(a.toLowerCase()),r="all"===j||e.accessType===j;return t&&r});return Y?(0,n.jsx)("div",{className:"min-h-screen bg-background-secondary flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-faculty mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-secondary",children:"Loading your dashboard..."})]})}):V?(0,n.jsx)("div",{className:"min-h-screen bg-background-secondary flex items-center justify-center",children:(0,n.jsxs)(v.Zp,{className:"text-center p-8",children:[(0,n.jsx)("div",{className:"text-danger mb-4",children:"⚠️"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-primary mb-2",children:"Error Loading Dashboard"}),(0,n.jsx)("p",{className:"text-secondary mb-4",children:V}),(0,n.jsx)(v.$n,{onClick:()=>window.location.reload(),children:"Retry"})]})}):(0,n.jsxs)("div",{className:"min-h-screen bg-background-secondary pb-20",children:[(0,n.jsx)(v.Y9,{title:"Faculty Dashboard",showNotifications:!0,showProfile:!0,onNotificationClick:()=>{A(!0)},onProfileClick:()=>T.push("/profile"),className:"bg-surface border-b border-default",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(y.A,{className:"h-5 w-5 text-secondary"}),D>0&&(0,n.jsx)(v.vd,{count:D,size:"sm",className:"absolute -top-2 -right-2"})]}),(0,n.jsx)(v.UW,{})]})}),(0,n.jsx)("div",{className:"px-4 py-6 bg-faculty/5",children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-faculty rounded-full flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-white font-semibold",children:(null==I||null==(e=I.name)?void 0:e.charAt(0))||"F"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-xl font-bold text-primary",children:["Welcome, ",(null==I?void 0:I.name)||"Faculty"]}),(0,n.jsx)("p",{className:"text-secondary",children:(null==I?void 0:I.department)||"Computer Science Department"})]})]})}),(0,n.jsx)("main",{className:"px-4 py-6",children:(()=>{switch(t){case"keys":default:return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsxs)("div",{className:"flex-1 relative",children:[(0,n.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted"}),(0,n.jsx)("input",{type:"text",placeholder:"Search keys...",value:a,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-surface border border-default rounded-xl focus:ring-2 focus:ring-faculty focus:border-transparent text-primary"})]}),(0,n.jsx)(v.$n,{variant:"all"!==j?"primary":"ghost",onClick:()=>N("all"===j?"permanent":"all"),icon:(0,n.jsx)(f,{className:"h-4 w-4"})})]}),(0,n.jsx)("div",{className:"flex space-x-2",children:["all","permanent","temporary"].map(e=>(0,n.jsx)(v.$n,{variant:j===e?"primary":"ghost",size:"sm",onClick:()=>N(e),className:"capitalize",children:"all"===e?"All Keys":e},e))}),(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4",children:ee.map(e=>(0,n.jsx)(v.Zp,{role:"faculty",className:"".concat(e.isOverdue?"border-l-4 border-l-danger":""),interactive:!0,children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,n.jsx)("h3",{className:"font-semibold text-primary",children:e.keyName}),(0,n.jsx)(v.Ex,{variant:"permanent"===e.accessType?"success":"warning",size:"sm",children:e.accessType}),e.isOverdue&&(0,n.jsx)(v.Ex,{variant:"danger",size:"sm",children:"Overdue"})]}),(0,n.jsxs)("div",{className:"space-y-1 text-sm text-secondary",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(h,{className:"h-3 w-3"}),(0,n.jsxs)("span",{children:[e.labName," (",e.labNumber,")"]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(p.A,{className:"h-3 w-3"}),(0,n.jsxs)("span",{children:["Last used: ",new Date(e.lastUsed).toLocaleDateString()]})]})]})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(v.$n,{variant:"ghost",size:"sm",onClick:()=>Z(e),icon:(0,n.jsx)(m,{className:"h-4 w-4"})}),(0,n.jsx)(v.$n,{variant:"ghost",size:"sm",onClick:()=>{C(e),P(!0)},icon:(0,n.jsx)(x,{className:"h-4 w-4"})})]})]})},e.id))}),0===ee.length&&(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(o.A,{className:"h-12 w-12 text-muted mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-primary mb-2",children:"No keys found"}),(0,n.jsx)("p",{className:"text-secondary",children:a?"Try adjusting your search terms.":"You have no assigned keys."})]})]});case"deposit":return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)(v.Zp,{role:"faculty",className:"text-center py-8",children:[(0,n.jsx)(i.A,{className:"h-12 w-12 text-faculty mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-primary mb-2",children:"Deposit Keys"}),(0,n.jsx)("p",{className:"text-secondary mb-6",children:"Generate QR code to deposit keys with security"}),(0,n.jsx)(v.$n,{variant:"primary",size:"lg",children:"Generate Deposit QR"})]})});case"dept-keys":return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4",children:K.map(e=>(0,n.jsx)(v.Zp,{role:"faculty",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-primary",children:e.keyName}),(0,n.jsx)("p",{className:"text-sm text-secondary",children:e.labName})]}),(0,n.jsx)(v.Ex,{variant:"available"===e.status?"success":"warning",children:"available"===e.status?"Available":"With ".concat(e.currentHolder)})]})},e.id))})});case"history":return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)(v.Zp,{role:"faculty",className:"text-center py-8",children:[(0,n.jsx)(c.A,{className:"h-12 w-12 text-faculty mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-primary mb-2",children:"Key History"}),(0,n.jsx)("p",{className:"text-secondary",children:"View your key usage history and logs"})]})})}})()}),(0,n.jsx)(v.im,{items:W,activeItem:t,onItemClick:e=>{r(e.id)},variant:"faculty"}),(0,n.jsx)(v.vq,{isOpen:k,onClose:()=>A(!1),notifications:L,userRole:"faculty",onMarkAsRead:U,onMarkAllAsRead:B,onDeleteNotification:z}),S&&(0,n.jsx)(E,{isOpen:S,onClose:()=>{R(!1),C(null)},keyData:_,mode:"collection"}),O&&(0,n.jsx)(M,{isOpen:O,onClose:()=>{P(!1),C(null)},keyData:_,onShare:X})]})};function O(){return(0,n.jsx)(a.gX,{children:(0,n.jsx)(R,{})})}},3861:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},3901:(e,t,r)=>{var n=r(6346);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return o},createAsyncLocalStorage:function(){return s},createSnapshot:function(){return i}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let a="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function s(){return a?new a:new n}function o(e){return a?a.bind(e):n.bind(e)}function i(){return a?a.snapshot():function(e,...t){return e(...t)}}},4122:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},4170:(e,t,r)=>{var n=r(7382).default,a=r(8109);e.exports=function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4186:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},4355:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},4416:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4514:(e,t,r)=>{var n=r(3539);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},4676:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},4801:(e,t,r)=>{var n=r(7382).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},4861:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},4947:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},5128:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(5155);let a=(0,r(2115).forwardRef)((e,t)=>{let{children:r,className:a="",variant:s="default",padding:o="md",shadow:i=!0,hover:l=!1,onClick:c,role:u=null,elevated:d=!1,interactive:f=!1,...h}=e,p={default:"",success:"border-success/30 bg-success-light",warning:"border-warning/30 bg-warning-light",danger:"border-danger/30 bg-danger-light",info:"border-info/30 bg-info-light",primary:"border-primary-200 bg-primary-50",faculty:"border-faculty/30 bg-faculty-light",security:"border-security/30 bg-security-light",hod:"border-hod/30 bg-hod-light","security-head":"border-security-head/30 bg-security-head-light"},m=u?p[u]:"",x=u?"":p[s],y="".concat("bg-surface rounded-2xl border border-default transition-all duration-200"," ").concat(x," ").concat(m," ").concat({none:"",xs:"p-2",sm:"p-3",md:"p-4",lg:"p-6",xl:"p-8"}[o]," ").concat(i?d?"shadow-elevated":"card-shadow":""," ").concat(l||f?"hover:shadow-lg hover:-translate-y-1 cursor-pointer active:scale-[0.98]":""," ").concat(c?"cursor-pointer":""," ").concat(a);return(0,n.jsx)("div",{ref:t,className:y,onClick:c,role:f?"button":void 0,tabIndex:f?0:void 0,onKeyDown:f?e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==c||c(e))}:void 0,...h,children:r})});a.displayName="Card";let s=a},5146:(e,t,r)=>{"use strict";var n=r(6620);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.proxyLogger=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;try{if("undefined"==typeof window)return e;var r={},n=function(e){var n;r[e]=(n=(0,o.default)(a.default.mark(function r(n,o){var i,d;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u[e](n,o),"error"===e&&(o=c(o)),o.client=!0,i="".concat(t,"/_log"),d=new URLSearchParams(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({level:e,code:n},o)),!navigator.sendBeacon){r.next=8;break}return r.abrupt("return",navigator.sendBeacon(i,d));case 8:return r.next=10,fetch(i,{method:"POST",body:d,keepalive:!0});case 10:return r.abrupt("return",r.sent);case 11:case"end":return r.stop()}},r)})),function(e,t){return n.apply(this,arguments)})};for(var i in e)n(i);return r}catch(e){return u}},t.setLogger=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t||(u.debug=function(){}),e.error&&(u.error=e.error),e.warn&&(u.warn=e.warn),e.debug&&(u.debug=e.debug)};var a=n(r(1390)),s=n(r(3901)),o=n(r(9165)),i=r(1883);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){var t,r;if(e instanceof Error&&!(e instanceof i.UnknownError))return{message:e.message,stack:e.stack,name:e.name};if(null!=(t=e)&&t.error){e.error=c(e.error),e.message=null!=(r=e.message)?r:e.error.message}return e}var u={error:function(e,t){t=c(t),console.error("[next-auth][error][".concat(e,"]"),"\nhttps://next-auth.js.org/errors#".concat(e.toLowerCase()),t.message,t)},warn:function(e){console.warn("[next-auth][warn][".concat(e,"]"),"\nhttps://next-auth.js.org/warnings#".concat(e.toLowerCase()))},debug:function(e,t){console.log("[next-auth][debug][".concat(e,"]"),t)}};t.default=u},5440:e=>{e.exports=function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}},e.exports.__esModule=!0,e.exports.default=e.exports},5580:(e,t,r)=>{let n=r(3585),a=r(6087);function s(e){this.mode=n.KANJI,this.data=e}s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=a.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r=(r>>>8&255)*192+(255&r),e.put(r,13)}},e.exports=s},5591:(e,t,r)=>{var n=r(2402),a=r(7476);e.exports=function e(t,r){var s;this.next||(a(e.prototype),a(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),a(this,"_invoke",function(e,a,o){function i(){return new r(function(a,s){!function e(a,s,o,i){try{var l=t[a](s),c=l.value;return c instanceof n?r.resolve(c.v).then(function(t){e("next",t,o,i)},function(t){e("throw",t,o,i)}):r.resolve(c).then(function(e){l.value=e,o(l)},function(t){return e("throw",t,o,i)})}catch(e){i(e)}}(e,o,a,s)})}return s=s?s.then(i,i):i()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},5593:(e,t,r)=>{var n=r(4947),a=r(1727),s=r(4514),o=r(7034);e.exports=function(e,t){return n(e)||a(e,t)||s(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},5738:(e,t,r)=>{"use strict";r.d(t,{Ex:()=>k,im:()=>j,$n:()=>o,Zp:()=>i.A,Y9:()=>g,aF:()=>b,vd:()=>q,vq:()=>J,ER:()=>S,NP:()=>B.Ay,UW:()=>H,tE:()=>L,dj:()=>I});var n=r(5155),a=r(2115);let s=(0,a.forwardRef)((e,t)=>{let{children:r,variant:a="primary",size:s="md",className:o="",disabled:i=!1,loading:l=!1,icon:c,...u}=e,d="".concat("inline-flex items-center justify-center font-medium rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500",secondary:"bg-surface hover:bg-surface-secondary text-primary border border-default focus:ring-primary-500",success:"bg-success hover:bg-green-700 text-white focus:ring-green-500",warning:"bg-warning hover:bg-yellow-700 text-white focus:ring-yellow-500",danger:"bg-danger hover:bg-red-700 text-white focus:ring-red-500",ghost:"hover:bg-surface-secondary text-primary focus:ring-primary-500",outline:"border border-default hover:bg-surface-secondary text-primary focus:ring-primary-500"}[a]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[s]," ").concat(o);return(0,n.jsxs)("button",{ref:t,className:d,disabled:i||l,...u,children:[l&&(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c&&!l&&(0,n.jsx)("span",{className:"mr-2",children:c}),r]})});s.displayName="Button";let o=s;var i=r(5128),l=r(9946);let c=(0,l.A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);var u=r(7924),d=r(3861),f=r(1007);let h=(0,l.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var p=r(381);let m=(0,l.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var x=r(5695),y=r(8540);let g=e=>{let{title:t="VNR Key Management",showNotifications:r=!0,showSearch:s=!1,showProfile:i=!0,onNotificationClick:l,onProfileClick:g,onMenuClick:v,searchValue:b,onSearchChange:w,searchPlaceholder:j="Search...",className:N=""}=e,{user:k,logout:A}=(0,y.As)(),E=(0,x.useRouter)(),[_,C]=(0,a.useState)(!1),S=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{S.current&&!S.current.contains(e.target)&&C(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let M=e=>{switch(e){case"faculty_lab_staff":return"Faculty/Lab Staff";case"security_staff":return"Security Personnel";case"hod":return"Head of Department";case"security_incharge":return"Security In-charge";default:return e}};return(0,n.jsx)("header",{className:"bg-gray-800 border-b border-gray-700 px-4 py-3 ".concat(N),children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[v&&(0,n.jsx)(o,{variant:"ghost",size:"sm",onClick:v,icon:(0,n.jsx)(c,{className:"h-5 w-5"}),className:"lg:hidden"}),(0,n.jsx)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>E.push("/"),children:(0,n.jsx)("img",{src:"/VNRVJIETLOGO.png",alt:"VNR VJIET Logo",className:"w-100 h-16 object-contain"})})]}),s&&(0,n.jsx)("div",{className:"flex-1 max-w-md mx-4",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,n.jsx)("input",{type:"text",placeholder:j,value:b,onChange:e=>null==w?void 0:w(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[r&&(0,n.jsx)(o,{variant:"ghost",size:"sm",onClick:l,icon:(0,n.jsx)(d.A,{className:"h-5 w-5"}),className:"relative",children:(0,n.jsx)("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full"})}),i&&k&&(0,n.jsxs)("div",{className:"relative",ref:S,children:[(0,n.jsx)("button",{onClick:()=>C(!_),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center",children:(0,n.jsx)(f.A,{className:"h-4 w-4 text-gray-300"})}),(0,n.jsxs)("div",{className:"hidden sm:block text-left",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-white",children:k.userId}),(0,n.jsx)("div",{className:"text-xs px-2 py-0.5 rounded-full ".concat((e=>{switch(e){case"faculty_lab_staff":return"bg-primary-100 text-primary-800";case"security_staff":return"bg-green-100 text-green-800";case"hod":return"bg-indigo-600 text-white";case"security_incharge":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(k.role)),children:M(k.role)})]}),(0,n.jsx)(h,{className:"h-4 w-4 text-gray-300"})]})}),_&&(0,n.jsxs)("div",{className:"absolute right-0 mt-2 w-48 rounded-lg shadow-lg border py-1 z-50",style:{backgroundColor:"#ffffff !important",borderColor:"#e5e7eb !important"},children:[(0,n.jsxs)("div",{className:"px-4 py-2 border-b",style:{borderColor:"#f3f4f6 !important"},children:[(0,n.jsx)("div",{className:"text-sm font-bold",style:{color:"#000000 !important",fontWeight:"bold !important"},children:k.userId}),(0,n.jsx)("div",{className:"text-xs font-semibold",style:{color:"#000000 !important",fontWeight:"600 !important"},children:M(k.role)})]}),(0,n.jsxs)("button",{onClick:()=>{g&&g(),C(!1)},className:"w-full text-left px-4 py-2 text-sm font-semibold hover:bg-gray-100 flex items-center space-x-2",style:{color:"#000000 !important",fontWeight:"600 !important"},children:[(0,n.jsx)(p.A,{className:"h-4 w-4",style:{color:"#000000 !important",fill:"#000000 !important"}}),(0,n.jsx)("span",{style:{color:"#000000 !important"},children:"Profile Settings"})]}),(0,n.jsxs)("button",{onClick:()=>{A(),C(!1)},className:"w-full text-left px-4 py-2 text-sm font-semibold hover:bg-red-50 flex items-center space-x-2",style:{color:"#dc2626 !important",fontWeight:"600 !important"},children:[(0,n.jsx)(m,{className:"h-4 w-4",style:{color:"#dc2626 !important",fill:"#dc2626 !important"}}),(0,n.jsx)("span",{style:{color:"#dc2626 !important"},children:"Logout"})]})]})]})]})]})})};var v=r(4416);let b=e=>{let{isOpen:t,onClose:r,title:s,children:i,size:l="md",showCloseButton:c=!0,className:u=""}=e;return((0,a.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,r]),t)?(0,n.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),(0,n.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[l]," ").concat(u," slide-up"),children:[(s||c)&&(0,n.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s&&(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s}),c&&(0,n.jsx)(o,{variant:"ghost",size:"sm",onClick:r,icon:(0,n.jsx)(v.A,{className:"h-5 w-5"})})]}),(0,n.jsx)("div",{className:"p-6",children:i})]})})]}):null},w=(0,a.forwardRef)((e,t)=>{let{items:r=[],activeItem:a,onItemClick:s,className:o="",variant:i="default",showLabels:l=!0,badge:c=null}=e,u=(e=>{switch(e){case"faculty":return{bg:"bg-surface border-default",active:"text-faculty bg-faculty/10",inactive:"text-secondary hover:text-faculty hover:bg-faculty/5"};case"security":return{bg:"bg-surface border-default",active:"text-security bg-security/10",inactive:"text-secondary hover:text-security hover:bg-security/5"};case"hod":return{bg:"bg-surface border-default",active:"text-hod bg-hod/10",inactive:"text-secondary hover:text-hod hover:bg-hod/5"};case"security-head":return{bg:"bg-surface border-default",active:"text-security-head bg-security-head/10",inactive:"text-secondary hover:text-security-head hover:bg-security-head/5"};default:return{bg:"bg-surface border-default",active:"text-primary-600 bg-primary-50",inactive:"text-secondary hover:text-primary hover:bg-primary-50"}}})(i);return(0,n.jsx)("nav",{ref:t,className:"fixed bottom-0 left-0 right-0 ".concat(u.bg," border-t px-2 py-1 safe-area-pb z-50 ").concat(o),style:{paddingBottom:"max(0.25rem, env(safe-area-inset-bottom))"},children:(0,n.jsx)("div",{className:"flex items-center justify-around max-w-md mx-auto",children:r.map((e,t)=>{let r=a===e.id,o=e.badge&&e.badge>0;return(0,n.jsxs)("button",{onClick:()=>null==s?void 0:s(e),className:"relative flex flex-col items-center justify-center p-3 rounded-2xl transition-all duration-200 min-w-[60px] ".concat(r?u.active:u.inactive),"aria-label":e.label,children:[o&&(0,n.jsx)("div",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-danger text-white text-xs font-bold rounded-full flex items-center justify-center px-1",children:e.badge>99?"99+":e.badge}),(0,n.jsx)("div",{className:"mb-1 ".concat(r?"scale-110":""," transition-transform duration-200"),children:e.icon}),l&&(0,n.jsx)("span",{className:"text-xs font-medium leading-tight text-center",children:e.label})]},e.id||t)})})})});w.displayName="BottomNavigation";let j=w,N=(0,a.forwardRef)((e,t)=>{let{children:r,variant:a="default",size:s="md",className:o="",...i}=e,l="".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",permanent:"bg-green-100 text-green-800",temporary:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800",available:"bg-gray-100 text-gray-800"}[a]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"}[s]," ").concat(o);return(0,n.jsx)("span",{ref:t,className:l,...i,children:r})});N.displayName="Badge";let k=N;r(6862);var A=r(6645),E=r.n(A),_=r(4355);let C=E()(()=>r.e(904).then(r.bind(r,2904)),{loadableGenerated:{webpack:()=>[2904]},ssr:!1,loading:()=>(0,n.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",children:(0,n.jsxs)(i.A,{className:"w-full max-w-md",padding:"lg",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(_.A,{className:"h-5 w-5 text-primary-600"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Loading Scanner..."})]})}),(0,n.jsxs)("div",{className:"p-6 text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Initializing camera scanner..."})]})]})})}),S=e=>{let[t,r]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{r(!0)},[]),t)?(0,n.jsx)(C,{...e}):null};var M=r(646),R=r(4861),O=r(1243);let P=(0,l.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),T=(0,a.createContext)(),I=()=>{let e=(0,a.useContext)(T);if(!e)throw Error("useToast must be used within a ToastProvider");return e},L=e=>{let{children:t}=e,[r,s]=(0,a.useState)([]),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=Date.now()+Math.random(),a={id:n,message:e,type:t,duration:r};return s(e=>[...e,a]),r>0&&setTimeout(()=>{i(n)},r),n},i=e=>{s(t=>t.filter(t=>t.id!==e))};return(0,n.jsxs)(T.Provider,{value:{addToast:o,removeToast:i,success:(e,t)=>o(e,"success",t),error:(e,t)=>o(e,"error",t),warning:(e,t)=>o(e,"warning",t),info:(e,t)=>o(e,"info",t)},children:[t,(0,n.jsx)(D,{toasts:r,onRemove:i})]})},D=e=>{let{toasts:t,onRemove:r}=e;return 0===t.length?null:(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(e=>(0,n.jsx)(U,{toast:e,onRemove:r},e.id))})},U=e=>{let{toast:t,onRemove:r}=e,[s,o]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setTimeout(()=>o(!0),10);return()=>clearTimeout(e)},[]);let c=()=>{switch(t.type){case"success":return"text-green-800";case"error":return"text-red-800";case"warning":return"text-yellow-800";default:return"text-primary-800"}};return(0,n.jsxs)("div",{className:(()=>{let e="flex items-center p-4 rounded-lg shadow-lg border max-w-sm w-full transition-all duration-300 transform";if(i||!s)return"".concat(e," translate-x-full opacity-0");switch(t.type){case"success":return"".concat(e," bg-green-50 border-green-200 translate-x-0 opacity-100");case"error":return"".concat(e," bg-red-50 border-red-200 translate-x-0 opacity-100");case"warning":return"".concat(e," bg-yellow-50 border-yellow-200 translate-x-0 opacity-100");default:return"".concat(e," bg-primary-50 border-primary-200 translate-x-0 opacity-100")}})(),children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(t.type){case"success":return(0,n.jsx)(M.A,{className:"h-5 w-5 text-green-600"});case"error":return(0,n.jsx)(R.A,{className:"h-5 w-5 text-red-600"});case"warning":return(0,n.jsx)(O.A,{className:"h-5 w-5 text-yellow-600"});default:return(0,n.jsx)(P,{className:"h-5 w-5 text-primary-600"})}})()}),(0,n.jsx)("div",{className:"ml-3 flex-1 ".concat(c()),children:(0,n.jsx)("p",{className:"text-sm font-medium",children:t.message})}),(0,n.jsx)("button",{onClick:()=>{l(!0),setTimeout(()=>r(t.id),300)},className:"ml-4 flex-shrink-0 rounded-md p-1.5 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat(c()),children:(0,n.jsx)(v.A,{className:"h-4 w-4"})})]})};var B=r(3202);let z=(0,l.A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),F=(0,l.A)("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),H=e=>{let{className:t="",size:r="sm",variant:a="ghost",showLabel:s=!1}=e,{theme:i,toggleTheme:l}=(0,B.DP)(),c="dark"===i;return(0,n.jsx)(o,{variant:a,size:r,onClick:l,className:"transition-all duration-200 ".concat(t),icon:c?(0,n.jsx)(z,{className:"h-4 w-4"}):(0,n.jsx)(F,{className:"h-4 w-4"}),"aria-label":"Switch to ".concat(c?"light":"dark"," mode"),children:s&&(c?"Light":"Dark")})},K=(0,a.forwardRef)((e,t)=>{let{count:r=0,type:a="default",size:s="md",className:o="",onClick:i,showIcon:l=!0,animate:c=!0,...u}=e;if(0===r)return null;let f=r>99?"99+":r.toString();return(0,n.jsx)("div",{ref:t,className:"\n        inline-flex items-center justify-center\n        ".concat({sm:"min-w-[16px] h-4 text-xs px-1",md:"min-w-[20px] h-5 text-xs px-1.5",lg:"min-w-[24px] h-6 text-sm px-2"}[s],"\n        ").concat({default:"bg-primary-600 text-white",warning:"bg-warning text-white",danger:"bg-danger text-white",success:"bg-success text-white",info:"bg-info text-white"}[a],"\n        rounded-full font-bold\n        ").concat(c?"animate-bounce-in":"","\n        ").concat(i?"cursor-pointer hover:scale-110 transition-transform":"","\n        ").concat(o,"\n      "),onClick:i,...u,children:l&&1===r?(()=>{switch(a){case"warning":case"danger":return(0,n.jsx)(O.A,{className:"h-3 w-3"});case"success":return(0,n.jsx)(M.A,{className:"h-3 w-3"});case"info":return(0,n.jsx)(P,{className:"h-3 w-3"});default:return(0,n.jsx)(d.A,{className:"h-3 w-3"})}})():f})});K.displayName="NotificationBadge";let q=K;var Y=r(2525);let J=e=>{let{isOpen:t,onClose:r,notifications:s=[],onMarkAsRead:l,onMarkAllAsRead:c,onDeleteNotification:u,userRole:f="faculty"}=e,[h,p]=(0,a.useState)("all"),m=s.filter(e=>"unread"===h?!e.read:"alerts"!==h||"alert"===e.type||"warning"===e.type),x=s.filter(e=>!e.read).length;return(0,n.jsx)(b,{isOpen:t,onClose:r,title:"Notifications",size:"lg",className:"max-h-[80vh]",children:(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-default",children:[(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)(o,{variant:"all"===h?"primary":"ghost",size:"sm",onClick:()=>p("all"),children:["All (",s.length,")"]}),(0,n.jsxs)(o,{variant:"unread"===h?"primary":"ghost",size:"sm",onClick:()=>p("unread"),children:["Unread (",x,")"]}),(0,n.jsx)(o,{variant:"alerts"===h?"primary":"ghost",size:"sm",onClick:()=>p("alerts"),children:"Alerts"})]}),x>0&&(0,n.jsx)(o,{variant:"ghost",size:"sm",onClick:c,children:"Mark all read"})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto space-y-3",children:0===m.length?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(d.A,{className:"h-12 w-12 text-muted mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-primary mb-2",children:"No notifications"}),(0,n.jsx)("p",{className:"text-secondary",children:"unread"===h?"All caught up!":"You have no notifications yet."})]}):m.map(e=>(0,n.jsx)(i.A,{className:"transition-all duration-200 ".concat(e.read?"":"border-l-4 border-l-primary-600 bg-primary-50/30"),padding:"sm",children:(0,n.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0 mt-1",children:(e=>{switch(e){case"alert":return(0,n.jsx)(O.A,{className:"h-5 w-5 text-danger"});case"warning":return(0,n.jsx)(O.A,{className:"h-5 w-5 text-warning"});case"success":return(0,n.jsx)(M.A,{className:"h-5 w-5 text-success"});case"info":return(0,n.jsx)(P,{className:"h-5 w-5 text-info"});default:return(0,n.jsx)(d.A,{className:"h-5 w-5 text-primary-600"})}})(e.type)}),(0,n.jsx)("div",{className:"flex-1 min-w-0",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-primary mb-1",children:e.title}),(0,n.jsx)("p",{className:"text-sm text-secondary mb-2",children:e.message}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted",children:[(0,n.jsx)("span",{children:(e=>{let t=Math.floor((new Date-new Date(e))/6e4);return t<1?"Just now":t<60?"".concat(t,"m ago"):t<1440?"".concat(Math.floor(t/60),"h ago"):"".concat(Math.floor(t/1440),"d ago")})(e.timestamp)}),e.category&&(0,n.jsx)("span",{className:"px-2 py-1 bg-surface-secondary rounded-full",children:e.category})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[!e.read&&(0,n.jsx)(o,{variant:"ghost",size:"sm",onClick:()=>l(e.id),className:"text-xs",children:"Mark read"}),(0,n.jsx)(o,{variant:"ghost",size:"sm",onClick:()=>u(e.id),icon:(0,n.jsx)(Y.A,{className:"h-3 w-3"}),className:"text-danger hover:bg-danger/10"})]})]})})]})},e.id))})]})})}},5744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorageInstance}});let n=r(7828)},5908:(e,t,r)=>{let n=r(6087),a=r(8976),s=r(4122),o=r(9621),i=r(7788),l=r(645),c=r(6517),u=r(519),d=r(61),f=r(2202),h=r(8252),p=r(3585),m=r(2920);function x(e,t,r){let n,a,s=e.size,o=h.getEncodedBits(t,r);for(n=0;n<15;n++)a=(o>>n&1)==1,n<6?e.set(n,8,a,!0):n<8?e.set(n+1,8,a,!0):e.set(s-15+n,8,a,!0),n<8?e.set(8,s-n-1,a,!0):n<9?e.set(8,15-n-1+1,a,!0):e.set(8,15-n-1,a,!0);e.set(s-8,8,1,!0)}t.create=function(e,t){let r,h;if(void 0===e||""===e)throw Error("No input text");let y=a.M;return void 0!==t&&(y=a.from(t.errorCorrectionLevel,a.M),r=f.from(t.version),h=c.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),function(e,t,r,a){let h;if(Array.isArray(e))h=m.fromArray(e);else if("string"==typeof e){let n=t;if(!n){let t=m.rawSplit(e);n=f.getBestVersionForData(t,r)}h=m.fromString(e,n||40)}else throw Error("Invalid data");let y=f.getBestVersionForData(h,r);if(!y)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<y)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+y+".\n")}else t=y;let g=function(e,t,r){let a=new s;r.forEach(function(t){a.put(t.mode.bit,4),a.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(a)});let o=(n.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t))*8;for(a.getLengthInBits()+4<=o&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);let i=(o-a.getLengthInBits())/8;for(let e=0;e<i;e++)a.put(e%2?17:236,8);return function(e,t,r){let a,s,o=n.getSymbolTotalCodewords(t),i=o-u.getTotalCodewordsCount(t,r),l=u.getBlocksCount(t,r),c=o%l,f=l-c,h=Math.floor(o/l),p=Math.floor(i/l),m=p+1,x=h-p,y=new d(x),g=0,v=Array(l),b=Array(l),w=0,j=new Uint8Array(e.buffer);for(let e=0;e<l;e++){let t=e<f?p:m;v[e]=j.slice(g,g+t),b[e]=y.encode(v[e]),g+=t,w=Math.max(w,t)}let N=new Uint8Array(o),k=0;for(a=0;a<w;a++)for(s=0;s<l;s++)a<v[s].length&&(N[k++]=v[s][a]);for(a=0;a<x;a++)for(s=0;s<l;s++)N[k++]=b[s][a];return N}(a,e,t)}(t,r,h),v=new o(n.getSymbolSize(t));!function(e,t){let r=e.size,n=l.getPositions(t);for(let t=0;t<n.length;t++){let a=n[t][0],s=n[t][1];for(let t=-1;t<=7;t++)if(!(a+t<=-1)&&!(r<=a+t))for(let n=-1;n<=7;n++)s+n<=-1||r<=s+n||(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(a+t,s+n,!0,!0):e.set(a+t,s+n,!1,!0))}}(v,t);let b=v.size;for(let e=8;e<b-8;e++){let t=e%2==0;v.set(e,6,t,!0),v.set(6,e,t,!0)}return!function(e,t){let r=i.getPositions(t);for(let t=0;t<r.length;t++){let n=r[t][0],a=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(n+t,a+r,!0,!0):e.set(n+t,a+r,!1,!0)}}(v,t),x(v,r,0),t>=7&&function(e,t){let r,n,a,s=e.size,o=f.getEncodedBits(t);for(let t=0;t<18;t++)r=Math.floor(t/3),n=t%3+s-8-3,a=(o>>t&1)==1,e.set(r,n,a,!0),e.set(n,r,a,!0)}(v,t),!function(e,t){let r=e.size,n=-1,a=r-1,s=7,o=0;for(let i=r-1;i>0;i-=2)for(6===i&&i--;;){for(let r=0;r<2;r++)if(!e.isReserved(a,i-r)){let n=!1;o<t.length&&(n=(t[o]>>>s&1)==1),e.set(a,i-r,n),-1==--s&&(o++,s=7)}if((a+=n)<0||r<=a){a-=n,n=-n;break}}}(v,g),isNaN(a)&&(a=c.getBestMask(v,x.bind(null,v,r))),c.applyMask(a,v),x(v,r,a),{modules:v,version:t,errorCorrectionLevel:r,maskPattern:a,segments:h}}(e,r,y,h)}},6045:(e,t,r)=>{var n=r(6346);function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n(a.key),a)}}e.exports=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},6087:(e,t)=>{let r,n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return n[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');r=e},t.isKanjiModeEnabled=function(){return void 0!==r},t.toSJIS=function(e){return r(e)}},6268:(e,t,r)=>{var n=r(3294),a=r(9828);e.exports=function(e,t,r){if(n())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var o=new(e.bind.apply(e,s));return r&&a(o,r.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports},6346:(e,t,r)=>{var n=r(7382).default,a=r(8919);e.exports=function(e){var t=a(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},6444:(e,t,r)=>{let n=r(3585);function a(e){this.mode=n.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t,r;for(t=0;t+3<=this.data.length;t+=3)r=parseInt(this.data.substr(t,3),10),e.put(r,10);let n=this.data.length-t;n>0&&(r=parseInt(this.data.substr(t),10),e.put(r,3*n+1))},e.exports=a},6514:(e,t,r)=>{let n=r(908);t.render=function(e,t,r){var a;let s=r,o=t;void 0!==s||t&&t.getContext||(s=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),s=n.getOptions(s);let i=n.getImageWidth(e.modules.size,s),l=o.getContext("2d"),c=l.createImageData(i,i);return n.qrToImageData(c.data,e,s),a=o,l.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=i,a.width=i,a.style.height=i+"px",a.style.width=i+"px",l.putImageData(c,0,0),o},t.renderToDataURL=function(e,r,n){let a=n;void 0!==a||r&&r.getContext||(a=r,r=void 0),a||(a={});let s=t.render(e,r,a),o=a.type||"image/png",i=a.rendererOpts||{};return s.toDataURL(o,i.quality)}},6517:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};let r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){let t=e.size,n=0,a=0,s=0,o=null,i=null;for(let l=0;l<t;l++){a=s=0,o=i=null;for(let c=0;c<t;c++){let t=e.get(l,c);t===o?a++:(a>=5&&(n+=r.N1+(a-5)),o=t,a=1),(t=e.get(c,l))===i?s++:(s>=5&&(n+=r.N1+(s-5)),i=t,s=1)}a>=5&&(n+=r.N1+(a-5)),s>=5&&(n+=r.N1+(s-5))}return n},t.getPenaltyN2=function(e){let t=e.size,n=0;for(let r=0;r<t-1;r++)for(let a=0;a<t-1;a++){let t=e.get(r,a)+e.get(r,a+1)+e.get(r+1,a)+e.get(r+1,a+1);(4===t||0===t)&&n++}return n*r.N2},t.getPenaltyN3=function(e){let t=e.size,n=0,a=0,s=0;for(let r=0;r<t;r++){a=s=0;for(let o=0;o<t;o++)a=a<<1&2047|e.get(r,o),o>=10&&(1488===a||93===a)&&n++,s=s<<1&2047|e.get(o,r),o>=10&&(1488===s||93===s)&&n++}return n*r.N3},t.getPenaltyN4=function(e){let t=0,n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*r.N4},t.applyMask=function(e,r){let n=r.size;for(let a=0;a<n;a++)for(let s=0;s<n;s++)r.isReserved(s,a)||r.xor(s,a,function(e,r,n){switch(e){case t.Patterns.PATTERN000:return(r+n)%2==0;case t.Patterns.PATTERN001:return r%2==0;case t.Patterns.PATTERN010:return n%3==0;case t.Patterns.PATTERN011:return(r+n)%3==0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(n/3))%2==0;case t.Patterns.PATTERN101:return r*n%2+r*n%3==0;case t.Patterns.PATTERN110:return(r*n%2+r*n%3)%2==0;case t.Patterns.PATTERN111:return(r*n%3+(r+n)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,s,a))},t.getBestMask=function(e,r){let n=Object.keys(t.Patterns).length,a=0,s=1/0;for(let o=0;o<n;o++){r(o),t.applyMask(o,e);let n=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),n<s&&(s=n,a=o)}return a}},6620:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=r(8229)._(r(7357));function a(e,t){var r;let a={};"function"==typeof e&&(a.loader=e);let s={...a,...t};return(0,n.default)({...s,modules:null==(r=s.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6862:(e,t,r)=>{let n=r(4676),a=r(5908),s=r(6514),o=r(2013);function i(e,t,r,s,o){let i=[].slice.call(arguments,1),l=i.length,c="function"==typeof i[l-1];if(!c&&!n())throw Error("Callback required as last argument");if(c){if(l<2)throw Error("Too few arguments provided");2===l?(o=r,r=t,t=s=void 0):3===l&&(t.getContext&&void 0===o?(o=s,s=void 0):(o=s,s=r,r=t,t=void 0))}else{if(l<1)throw Error("Too few arguments provided");return 1===l?(r=t,t=s=void 0):2!==l||t.getContext||(s=r,r=t,t=void 0),new Promise(function(n,o){try{let o=a.create(r,s);n(e(o,t,s))}catch(e){o(e)}})}try{let n=a.create(r,s);o(null,e(n,t,s))}catch(e){o(e)}}t.create=a.create,t.toCanvas=i.bind(null,s.render),t.toDataURL=i.bind(null,s.renderToDataURL),t.toString=i.bind(null,function(e,t,r){return o.render(e,r)})},7034:e=>{e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},7149:(e,t,r)=>{var n=r(8977);e.exports=function(e,t,r,a,s){var o=n(e,t,r,a,s);return o.next().then(function(e){return e.done?e.value:o.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},7354:(e,t)=>{let r=new Uint8Array(512),n=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)r[t]=e,n[e]=t,256&(e<<=1)&&(e^=285);for(let e=255;e<512;e++)r[e]=r[e-255]}(),t.log=function(e){if(e<1)throw Error("log("+e+")");return n[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[n[e]+n[t]]}},7357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let n=r(5155),a=r(2115),s=r(2146);function o(e){return{default:e&&"default"in e?e.default:e}}r(255);let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},l=function(e){let t={...i,...e},r=(0,a.lazy)(()=>t.loader().then(o)),l=t.loading;function c(e){let o=l?(0,n.jsx)(l,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?a.Suspense:a.Fragment,u=t.ssr?(0,n.jsxs)(n.Fragment,{children:[null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(c,{...i?{fallback:o}:{},children:u})}return c.displayName="LoadableComponent",c}},7382:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7476:e=>{function t(r,n,a,s){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}e.exports=t=function(e,r,n,a){function s(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?o?o(e,r,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[r]=n:(s("next",0),s("throw",1),s("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,a,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7487:(e,t,r)=>{let n=r(3585);function a(e){this.mode=n.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},e.exports=a},7542:(e,t,r)=>{Promise.resolve().then(r.bind(r,3815))},7788:(e,t,r)=>{let n=r(6087).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,r=n(e),a=145===r?26:2*Math.ceil((r-13)/(2*t-2)),s=[r-7];for(let e=1;e<t-1;e++)s[e]=s[e-1]-a;return s.push(6),s.reverse()},t.getPositions=function(e){let r=[],n=t.getRowColCoords(e),a=n.length;for(let e=0;e<a;e++)for(let t=0;t<a;t++)(0!==e||0!==t)&&(0!==e||t!==a-1)&&(e!==a-1||0!==t)&&r.push([n[e],n[t]]);return r}},7824:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,r(4054).createAsyncLocalStorage)()},7924:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8079:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},8109:e=>{e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},8252:(e,t,r)=>{let n=r(6087),a=n.getBCHDigit(1335);t.getEncodedBits=function(e,t){let r=e.bit<<3|t,s=r<<10;for(;n.getBCHDigit(s)-a>=0;)s^=1335<<n.getBCHDigit(s)-a;return(r<<10|s)^21522}},8521:e=>{"use strict";var t={single_source_shortest_paths:function(e,r,n){var a,s,o,i,l,c,u,d={},f={};f[r]=0;var h=t.PriorityQueue.make();for(h.push(r,0);!h.empty();)for(o in s=(a=h.pop()).value,i=a.cost,l=e[s]||{})l.hasOwnProperty(o)&&(c=i+l[o],u=f[o],(void 0===f[o]||u>c)&&(f[o]=c,h.push(o,c),d[o]=s));if(void 0!==n&&void 0===f[n])throw Error(["Could not find a path from ",r," to ",n,"."].join(""));return d},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],n=t;n;)r.push(n),e[n],n=e[n];return r.reverse(),r},find_path:function(e,r,n){var a=t.single_source_shortest_paths(e,r,n);return t.extract_shortest_path_from_predecessor_list(a,n)},PriorityQueue:{make:function(e){var r,n=t.PriorityQueue,a={};for(r in e=e||{},n)n.hasOwnProperty(r)&&(a[r]=n[r]);return a.queue=[],a.sorter=e.sorter||n.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},8540:(e,t,r)=>{"use strict";r.d(t,{OJ:()=>c,As:()=>u,xf:()=>d});var n=r(5155),a=r(2115),s=r(5695),o=r(2108);function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}!function e(t,r){function n(e,n,a){if("undefined"!=typeof document){"number"==typeof(a=i({},r,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var o in a)a[o]&&(s+="; "+o,!0!==a[o]&&(s+="="+a[o].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var s=r[a].split("="),o=s.slice(1).join("=");try{var i=decodeURIComponent(s[0]);if(n[i]=t.read(o,i),e===i)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",i({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,i({},this.attributes,t))},withConverter:function(t){return e(i({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let l=(0,a.createContext)();function c(e){let{children:t}=e,{data:r,status:i}=(0,o.useSession)(),[c,u]=(0,a.useState)(null),[d,f]=(0,a.useState)(!0),h=(0,s.useRouter)();(0,a.useEffect)(()=>{if("loading"===i)return void f(!0);(null==r?void 0:r.user)?u({id:r.user.id,name:r.user.name,email:r.user.email,image:r.user.image,role:r.user.role,department:r.user.department,employeeId:r.user.employeeId}):u(null),f(!1)},[r,i]);let p=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"google";try{let t=await (0,o.signIn)(e,{callbackUrl:x(null==c?void 0:c.role)||"/"});return{success:!0,result:t}}catch(e){return console.error("Login error:",e),{success:!1,error:"Login failed"}}},m=async()=>{try{await (0,o.signOut)({callbackUrl:"/login"})}catch(e){console.error("Logout error:",e)}},x=e=>{switch(e){case"admin":return"/admin";case"hod":return"/hod";case"security_head":return"/securityincharge";case"security":return"/security";case"faculty":return"/faculty";default:return"/"}};return(0,n.jsx)(l.Provider,{value:{user:c,loading:d||"loading"===i,login:p,logout:m,hasRole:e=>{if(!(null==c?void 0:c.role))return!1;let t={admin:4,security_head:3,hod:2,security:1,faculty:1};return(t[c.role]||0)>=(t[e]||0)},hasAnyRole:e=>!!(null==c?void 0:c.role)&&!!Array.isArray(e)&&e.includes(c.role),isRole:e=>(null==c?void 0:c.role)===e,navigateToDashboard:()=>{let e=x(null==c?void 0:c.role);console.log("\uD83D\uDE80 navigateToDashboard: Navigating to:",{userRole:null==c?void 0:c.role,dashboardUrl:e,userEmail:null==c?void 0:c.email});try{console.log("\uD83D\uDE80 navigateToDashboard: Attempting router.push..."),h.push(e),setTimeout(()=>{console.log("\uD83D\uDE80 navigateToDashboard: Router.push timeout, using window.location fallback"),window.location.href=e},1e3)}catch(t){console.error("\uD83D\uDE80 navigateToDashboard: Router.push failed, using window.location:",t),window.location.href=e}},getDashboardUrl:x,session:r},children:t})}function u(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function d(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(null),[s,o]=(0,a.useState)(null);return{loading:e,error:r,scanResult:s,clearError:()=>n(null),clearResult:()=>o(null),scanQRCode:async(e,r,a)=>{t(!0),n(null);try{let t=await fetch("/api/security/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrData:e,action:"collection",location:r,deviceInfo:a})}),n=await t.json();if(!t.ok)throw Error(n.error||"Failed to process QR code");return o(n),{success:!0,data:n}}catch(t){let e=t.message||"Failed to process QR code";return n(e),{success:!1,error:e}}finally{t(!1)}}}}},8683:(e,t,r)=>{var n=r(9828);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},8919:(e,t,r)=>{var n=r(7382).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8976:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,r){if(t.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw Error("Unknown EC Level: "+e)}}catch(e){return r}}},8977:(e,t,r)=>{var n=r(375),a=r(5591);e.exports=function(e,t,r,s,o){return new a(n().w(e,t,r,s),o||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},9130:(e,t,r)=>{"use strict";r.d(t,{E$:()=>u,ph:()=>c});var n=r(5155),a=r(2115);let s=(0,a.createContext)(),o={KEY_OVERDUE:{type:"alert",priority:"high",roles:["faculty","hod","security_head"],autoExpire:!1},KEY_ASSIGNMENT:{type:"info",priority:"medium",roles:["faculty"],autoExpire:!0,expireAfter:864e5},KEY_DELEGATION:{type:"info",priority:"medium",roles:["faculty","hod"],autoExpire:!0,expireAfter:6048e5},SECURITY_ALERT:{type:"alert",priority:"high",roles:["security","security_head"],autoExpire:!1},SYSTEM_MAINTENANCE:{type:"warning",priority:"medium",roles:["faculty","security","hod","security_head"],autoExpire:!0,expireAfter:72e5},REPORT_READY:{type:"success",priority:"low",roles:["hod","security_head"],autoExpire:!0,expireAfter:6048e5}},i=(e,t)=>{switch(t.type){case"ADD_NOTIFICATION":return{...e,notifications:[t.payload,...e.notifications],unreadCount:e.unreadCount+1};case"MARK_AS_READ":return{...e,notifications:e.notifications.map(e=>e.id===t.payload?{...e,read:!0}:e),unreadCount:Math.max(0,e.unreadCount-1)};case"MARK_ALL_AS_READ":return{...e,notifications:e.notifications.map(e=>({...e,read:!0})),unreadCount:0};case"DELETE_NOTIFICATION":let r=e.notifications.find(e=>e.id===t.payload);return{...e,notifications:e.notifications.filter(e=>e.id!==t.payload),unreadCount:r&&!r.read?Math.max(0,e.unreadCount-1):e.unreadCount};case"CLEAR_EXPIRED":let n=Date.now(),a=e.notifications.filter(e=>!e.expiresAt||e.expiresAt>n),s=e.notifications.filter(e=>e.expiresAt&&e.expiresAt<=n&&!e.read).length;return{...e,notifications:a,unreadCount:Math.max(0,e.unreadCount-s)};case"SET_NOTIFICATIONS":let o=t.payload.filter(e=>!e.read).length;return{...e,notifications:t.payload,unreadCount:o};default:return e}},l={notifications:[],unreadCount:0},c=e=>{let{children:t,userRole:r}=e,[c,u]=(0,a.useReducer)(i,l);(0,a.useEffect)(()=>{let e=setInterval(()=>{u({type:"CLEAR_EXPIRED"})},6e4);return()=>clearInterval(e)},[]);let d=e=>{let t=o[e.notificationType]||{type:"info",priority:"medium",roles:["faculty","security","hod","security_head"],autoExpire:!1};if(!t.roles.includes(r))return;let n={id:"notif_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),title:e.title,message:e.message,type:t.type,priority:t.priority,category:e.category||"General",timestamp:new Date,read:!1,expiresAt:t.autoExpire?Date.now()+t.expireAfter:null,data:e.data||{}};u({type:"ADD_NOTIFICATION",payload:n}),"granted"===Notification.permission&&"high"===t.priority&&new Notification(n.title,{body:n.message,icon:"/VNRVJIETLOGO.png",tag:n.id})},f=async()=>"Notification"in window&&"default"===Notification.permission?"granted"===await Notification.requestPermission():"granted"===Notification.permission,h={notifications:c.notifications,unreadCount:c.unreadCount,addNotification:d,markAsRead:e=>{u({type:"MARK_AS_READ",payload:e})},markAllAsRead:()=>{u({type:"MARK_ALL_AS_READ"})},deleteNotification:e=>{u({type:"DELETE_NOTIFICATION",payload:e})},requestNotificationPermission:f,...{keyOverdueReminder:(e,t)=>d({notificationType:"KEY_OVERDUE",title:"Key Return Reminder",message:"".concat(e," is ").concat(t," day(s) overdue. Please return immediately."),category:"Key Management",data:{keyName:e,daysOverdue:t}}),keyAssigned:(e,t)=>d({notificationType:"KEY_ASSIGNMENT",title:"New Key Assignment",message:"You have been assigned access to ".concat(e," (").concat(t,")."),category:"Key Management",data:{keyName:e,labName:t}}),keyDelegated:(e,t,r)=>d({notificationType:"KEY_DELEGATION",title:"Key Access Shared",message:"".concat(t," has shared ").concat(e," access with you for ").concat(r,"."),category:"Key Sharing",data:{keyName:e,fromFaculty:t,duration:r}}),overdueAlert:(e,t,r)=>d({notificationType:"SECURITY_ALERT",title:"Overdue Key Alert",message:"".concat(e," is ").concat(r," day(s) overdue. Faculty: ").concat(t),category:"Security Alert",data:{keyName:e,facultyName:t,daysOverdue:r}}),departmentReport:(e,t)=>d({notificationType:"REPORT_READY",title:"Department Report Ready",message:"".concat(e," report for ").concat(t," is ready for review."),category:"Reports",data:{reportType:e,period:t}}),maintenanceAlert:(e,t)=>d({notificationType:"SYSTEM_MAINTENANCE",title:"Scheduled Maintenance",message:"System maintenance scheduled for ".concat(e,". Duration: ").concat(t,"."),category:"System",data:{startTime:e,duration:t}})}};return(0,n.jsx)(s.Provider,{value:h,children:t})},u=()=>{let e=(0,a.useContext)(s);if(!e)throw Error("useNotifications must be used within a NotificationProvider");return e}},9165:e=>{function t(e,t,r,n,a,s,o){try{var i=e[s](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(a,s){var o=e.apply(r,n);function i(e){t(o,a,s,i,l,"next",e)}function l(e){t(o,a,s,i,l,"throw",e)}i(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},9184:(e,t,r)=>{let n=r(3585),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=n.ALPHANUMERIC,this.data=e}s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*a.indexOf(this.data[t]);r+=a.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=s},9343:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},9621:e=>{function t(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,r,n){let a=e*this.size+t;this.data[a]=r,n&&(this.reservedBit[a]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},9676:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},9803:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},9828:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9869:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d,...f}=e;return(0,n.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:s("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(f)&&{"aria-hidden":"true"},...f},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,n.createElement)(i,{ref:o,iconNode:t,className:s("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return r.displayName=a(e),r}}},e=>{e.O(0,[358],()=>e(e.s=7542)),_N_E=e.O()}]);