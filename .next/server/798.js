exports.id=798,exports.ids=[798],exports.modules={6314:(a,b,c)=>{Promise.resolve().then(c.bind(c,43949)),Promise.resolve().then(c.bind(c,43141))},8939:(a,b,c)=>{"use strict";c.d(b,{As:()=>j,OJ:()=>i,xf:()=>k});var d=c(60687),e=c(43210),f=c(16189),g=c(82136);c(15659);let h=(0,e.createContext)();function i({children:a}){let{data:b,status:c}=(0,g.useSession)(),[i,j]=(0,e.useState)(null),[k,l]=(0,e.useState)(!0),m=(0,f.useRouter)(),n=async(a="google")=>{try{let b=await (0,g.signIn)(a,{callbackUrl:p(i?.role)||"/"});return{success:!0,result:b}}catch(a){return console.error("Login error:",a),{success:!1,error:"Login failed"}}},o=async()=>{try{await (0,g.signOut)({callbackUrl:"/login"})}catch(a){console.error("Logout error:",a)}},p=a=>{switch(a){case"admin":return"/admin";case"hod":return"/hod";case"security_head":return"/securityincharge";case"security":return"/security";case"faculty":return"/faculty";default:return"/"}};return(0,d.jsx)(h.Provider,{value:{user:i,loading:k||"loading"===c,login:n,logout:o,hasRole:a=>{if(!i?.role)return!1;let b={admin:4,security_head:3,hod:2,security:1,faculty:1};return(b[i.role]||0)>=(b[a]||0)},hasAnyRole:a=>!!i?.role&&!!Array.isArray(a)&&a.includes(i.role),isRole:a=>i?.role===a,navigateToDashboard:()=>{let a=p(i?.role);console.log("\uD83D\uDE80 navigateToDashboard: Navigating to:",{userRole:i?.role,dashboardUrl:a,userEmail:i?.email});try{console.log("\uD83D\uDE80 navigateToDashboard: Attempting router.push..."),m.push(a),setTimeout(()=>{console.log("\uD83D\uDE80 navigateToDashboard: Router.push timeout, using window.location fallback"),window.location.href=a},1e3)}catch(b){console.error("\uD83D\uDE80 navigateToDashboard: Router.push failed, using window.location:",b),window.location.href=a}},getDashboardUrl:p,session:b},children:a})}function j(){let a=(0,e.useContext)(h);if(!a)throw Error("useAuth must be used within an AuthProvider");return a}function k(){let[a,b]=(0,e.useState)(!1),[c,d]=(0,e.useState)(null),[f,g]=(0,e.useState)(null);return{loading:a,error:c,scanResult:f,clearError:()=>d(null),clearResult:()=>g(null),scanQRCode:async(a,c,e)=>{b(!0),d(null);try{let b=await fetch("/api/security/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrData:a,action:"collection",location:c,deviceInfo:e})}),d=await b.json();if(!b.ok)throw Error(d.error||"Failed to process QR code");return g(d),{success:!0,data:d}}catch(b){let a=b.message||"Failed to process QR code";return d(a),{success:!1,error:a}}finally{b(!1)}}}}},23727:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,25227,23)),Promise.resolve().then(c.t.bind(c,86346,23)),Promise.resolve().then(c.t.bind(c,27924,23)),Promise.resolve().then(c.t.bind(c,40099,23)),Promise.resolve().then(c.t.bind(c,38243,23)),Promise.resolve().then(c.t.bind(c,28827,23)),Promise.resolve().then(c.t.bind(c,62763,23)),Promise.resolve().then(c.t.bind(c,97173,23)),Promise.resolve().then(c.bind(c,25587))},32444:(a,b,c)=>{"use strict";c.d(b,{E$:()=>k,ph:()=>j});var d=c(60687),e=c(43210);let f=(0,e.createContext)(),g={KEY_OVERDUE:{type:"alert",priority:"high",roles:["faculty","hod","security_head"],autoExpire:!1},KEY_ASSIGNMENT:{type:"info",priority:"medium",roles:["faculty"],autoExpire:!0,expireAfter:864e5},KEY_DELEGATION:{type:"info",priority:"medium",roles:["faculty","hod"],autoExpire:!0,expireAfter:6048e5},SECURITY_ALERT:{type:"alert",priority:"high",roles:["security","security_head"],autoExpire:!1},SYSTEM_MAINTENANCE:{type:"warning",priority:"medium",roles:["faculty","security","hod","security_head"],autoExpire:!0,expireAfter:72e5},REPORT_READY:{type:"success",priority:"low",roles:["hod","security_head"],autoExpire:!0,expireAfter:6048e5}},h=(a,b)=>{switch(b.type){case"ADD_NOTIFICATION":return{...a,notifications:[b.payload,...a.notifications],unreadCount:a.unreadCount+1};case"MARK_AS_READ":return{...a,notifications:a.notifications.map(a=>a.id===b.payload?{...a,read:!0}:a),unreadCount:Math.max(0,a.unreadCount-1)};case"MARK_ALL_AS_READ":return{...a,notifications:a.notifications.map(a=>({...a,read:!0})),unreadCount:0};case"DELETE_NOTIFICATION":let c=a.notifications.find(a=>a.id===b.payload);return{...a,notifications:a.notifications.filter(a=>a.id!==b.payload),unreadCount:c&&!c.read?Math.max(0,a.unreadCount-1):a.unreadCount};case"CLEAR_EXPIRED":let d=Date.now(),e=a.notifications.filter(a=>!a.expiresAt||a.expiresAt>d),f=a.notifications.filter(a=>a.expiresAt&&a.expiresAt<=d&&!a.read).length;return{...a,notifications:e,unreadCount:Math.max(0,a.unreadCount-f)};case"SET_NOTIFICATIONS":let g=b.payload.filter(a=>!a.read).length;return{...a,notifications:b.payload,unreadCount:g};default:return a}},i={notifications:[],unreadCount:0},j=({children:a,userRole:b})=>{let[c,j]=(0,e.useReducer)(h,i);(0,e.useEffect)(()=>{let a=setInterval(()=>{j({type:"CLEAR_EXPIRED"})},6e4);return()=>clearInterval(a)},[]);let k=a=>{let c=g[a.notificationType]||{type:"info",priority:"medium",roles:["faculty","security","hod","security_head"],autoExpire:!1};if(!c.roles.includes(b))return;let d={id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:a.title,message:a.message,type:c.type,priority:c.priority,category:a.category||"General",timestamp:new Date,read:!1,expiresAt:c.autoExpire?Date.now()+c.expireAfter:null,data:a.data||{}};j({type:"ADD_NOTIFICATION",payload:d}),"granted"===Notification.permission&&"high"===c.priority&&new Notification(d.title,{body:d.message,icon:"/VNRVJIETLOGO.png",tag:d.id})},l=async()=>"Notification"in window&&"default"===Notification.permission?"granted"===await Notification.requestPermission():"granted"===Notification.permission,m={notifications:c.notifications,unreadCount:c.unreadCount,addNotification:k,markAsRead:a=>{j({type:"MARK_AS_READ",payload:a})},markAllAsRead:()=>{j({type:"MARK_ALL_AS_READ"})},deleteNotification:a=>{j({type:"DELETE_NOTIFICATION",payload:a})},requestNotificationPermission:l,...{keyOverdueReminder:(a,b)=>k({notificationType:"KEY_OVERDUE",title:"Key Return Reminder",message:`${a} is ${b} day(s) overdue. Please return immediately.`,category:"Key Management",data:{keyName:a,daysOverdue:b}}),keyAssigned:(a,b)=>k({notificationType:"KEY_ASSIGNMENT",title:"New Key Assignment",message:`You have been assigned access to ${a} (${b}).`,category:"Key Management",data:{keyName:a,labName:b}}),keyDelegated:(a,b,c)=>k({notificationType:"KEY_DELEGATION",title:"Key Access Shared",message:`${b} has shared ${a} access with you for ${c}.`,category:"Key Sharing",data:{keyName:a,fromFaculty:b,duration:c}}),overdueAlert:(a,b,c)=>k({notificationType:"SECURITY_ALERT",title:"Overdue Key Alert",message:`${a} is ${c} day(s) overdue. Faculty: ${b}`,category:"Security Alert",data:{keyName:a,facultyName:b,daysOverdue:c}}),departmentReport:(a,b)=>k({notificationType:"REPORT_READY",title:"Department Report Ready",message:`${a} report for ${b} is ready for review.`,category:"Reports",data:{reportType:a,period:b}}),maintenanceAlert:(a,b)=>k({notificationType:"SYSTEM_MAINTENANCE",title:"Scheduled Maintenance",message:`System maintenance scheduled for ${a}. Duration: ${b}.`,category:"System",data:{startTime:a,duration:b}})}};return(0,d.jsx)(f.Provider,{value:m,children:a})},k=()=>{let a=(0,e.useContext)(f);if(!a)throw Error("useNotifications must be used within a NotificationProvider");return a}},32648:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>m,metadata:()=>l,viewport:()=>k});var d=c(37413),e=c(81795),f=c.n(e),g=c(99767),h=c.n(g);c(82704);var i=c(98715),j=c(51769);let k={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,viewportFit:"cover",themeColor:[{media:"(prefers-color-scheme: light)",color:"#88041c"},{media:"(prefers-color-scheme: dark)",color:"#1e293b"}]},l={title:"VNR Key Management System",description:"QR-based key management system for faculty, security, and administrators",keywords:"key management, QR code, faculty, security, VNR VJIET, mobile-first",authors:[{name:"VNR VJIET"}],manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"VNR Key Management"},formatDetection:{telephone:!1},other:{"mobile-web-app-capable":"yes","apple-mobile-web-app-capable":"yes","apple-mobile-web-app-status-bar-style":"default","apple-touch-fullscreen":"yes"}};function m({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${f().variable} ${h().variable} antialiased`,children:(0,d.jsx)(i.default,{children:(0,d.jsx)(j.default,{children:a})})})})}},43141:(a,b,c)=>{"use strict";c.d(b,{default:()=>j});var d=c(60687),e=c(82136),f=c(8939),g=c(50913),h=c(32444);function i({children:a}){let{user:b}=(0,f.As)();return(0,d.jsx)(h.ph,{userRole:b?.role||"faculty",children:a})}function j({children:a}){return(0,d.jsx)(e.SessionProvider,{children:(0,d.jsx)(g.NP,{children:(0,d.jsx)(f.OJ,{children:(0,d.jsx)(i,{children:(0,d.jsx)(g.tE,{children:a})})})})})}},43949:(a,b,c)=>{"use strict";c.d(b,{default:()=>l});var d=c(60687),e=c(43210),f=c.n(e),g=c(43649),h=c(78122),i=c(32192),j=c(50913);class k extends f().Component{constructor(a){super(a),this.reportError=(a,b)=>{console.error("Error Report:",{message:a.message,stack:a.stack,componentStack:b.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,errorId:this.state.errorId})},this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(a){return{hasError:!0,errorId:Date.now().toString(36)+Math.random().toString(36).substr(2)}}componentDidCatch(a,b){console.error("ErrorBoundary caught an error:",a,b),this.setState({error:a,errorInfo:b}),this.reportError(a,b)}render(){if(this.state.hasError){let{error:a,errorInfo:b,errorId:c}=this.state;return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,d.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:(0,d.jsx)(g.A,{className:"w-6 h-6 text-red-600"})}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Please try again or contact support if the problem persists."}),c&&(0,d.jsx)("div",{className:"bg-gray-100 rounded p-3 mb-4",children:(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:["Error ID: ",(0,d.jsx)("code",{className:"font-mono",children:c})]})}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,d.jsxs)(j.$n,{onClick:this.handleRetry,className:"flex items-center justify-center gap-2",children:[(0,d.jsx)(h.A,{className:"w-4 h-4"}),"Try Again"]}),(0,d.jsxs)(j.$n,{onClick:this.handleGoHome,variant:"outline",className:"flex items-center justify-center gap-2",children:[(0,d.jsx)(i.A,{className:"w-4 h-4"}),"Go Home"]})]}),!1]})]})})}return this.props.children}}let l=k},46055:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(31658);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},50913:(a,b,c)=>{"use strict";c.d(b,{Ex:()=>x,im:()=>v,$n:()=>g,Zp:()=>h.A,Y9:()=>r,aF:()=>t,vd:()=>Q,vq:()=>S,ER:()=>B,NP:()=>L.Ay,UW:()=>O,tE:()=>I,dj:()=>H});var d=c(60687),e=c(43210);let f=(0,e.forwardRef)(({children:a,variant:b="primary",size:c="md",className:e="",disabled:f=!1,loading:g=!1,icon:h,...i},j)=>{let k=`inline-flex items-center justify-center font-medium rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500",secondary:"bg-surface hover:bg-surface-secondary text-primary border border-default focus:ring-primary-500",success:"bg-success hover:bg-green-700 text-white focus:ring-green-500",warning:"bg-warning hover:bg-yellow-700 text-white focus:ring-yellow-500",danger:"bg-danger hover:bg-red-700 text-white focus:ring-red-500",ghost:"hover:bg-surface-secondary text-primary focus:ring-primary-500",outline:"border border-default hover:bg-surface-secondary text-primary focus:ring-primary-500"}[b]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[c]} ${e}`;return(0,d.jsxs)("button",{ref:j,className:k,disabled:f||g,...i,children:[g&&(0,d.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),h&&!g&&(0,d.jsx)("span",{className:"mr-2",children:h}),a]})});f.displayName="Button";let g=f;var h=c(87646),i=c(12941),j=c(99270),k=c(97051),l=c(58869),m=c(78272),n=c(84027),o=c(40083),p=c(16189),q=c(8939);let r=({title:a="VNR Key Management",showNotifications:b=!0,showSearch:c=!1,showProfile:f=!0,onNotificationClick:h,onProfileClick:r,onMenuClick:s,searchValue:t,onSearchChange:u,searchPlaceholder:v="Search...",className:w=""})=>{let{user:x,logout:y}=(0,q.As)(),z=(0,p.useRouter)(),[A,B]=(0,e.useState)(!1),C=(0,e.useRef)(null);(0,e.useEffect)(()=>{let a=a=>{C.current&&!C.current.contains(a.target)&&B(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let D=a=>{switch(a){case"faculty_lab_staff":return"Faculty/Lab Staff";case"security_staff":return"Security Personnel";case"hod":return"Head of Department";case"security_incharge":return"Security In-charge";default:return a}};return(0,d.jsx)("header",{className:`bg-gray-800 border-b border-gray-700 px-4 py-3 ${w}`,children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[s&&(0,d.jsx)(g,{variant:"ghost",size:"sm",onClick:s,icon:(0,d.jsx)(i.A,{className:"h-5 w-5"}),className:"lg:hidden"}),(0,d.jsx)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>z.push("/"),children:(0,d.jsx)("img",{src:"/VNRVJIETLOGO.png",alt:"VNR VJIET Logo",className:"w-100 h-16 object-contain"})})]}),c&&(0,d.jsx)("div",{className:"flex-1 max-w-md mx-4",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,d.jsx)("input",{type:"text",placeholder:v,value:t,onChange:a=>u?.(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[b&&(0,d.jsx)(g,{variant:"ghost",size:"sm",onClick:h,icon:(0,d.jsx)(k.A,{className:"h-5 w-5"}),className:"relative",children:(0,d.jsx)("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full"})}),f&&x&&(0,d.jsxs)("div",{className:"relative",ref:C,children:[(0,d.jsx)("button",{onClick:()=>B(!A),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center",children:(0,d.jsx)(l.A,{className:"h-4 w-4 text-gray-300"})}),(0,d.jsxs)("div",{className:"hidden sm:block text-left",children:[(0,d.jsx)("div",{className:"text-sm font-medium text-white",children:x.userId}),(0,d.jsx)("div",{className:`text-xs px-2 py-0.5 rounded-full ${(a=>{switch(a){case"faculty_lab_staff":return"bg-primary-100 text-primary-800";case"security_staff":return"bg-green-100 text-green-800";case"hod":return"bg-indigo-600 text-white";case"security_incharge":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(x.role)}`,children:D(x.role)})]}),(0,d.jsx)(m.A,{className:"h-4 w-4 text-gray-300"})]})}),A&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-48 rounded-lg shadow-lg border py-1 z-50",style:{backgroundColor:"#ffffff !important",borderColor:"#e5e7eb !important"},children:[(0,d.jsxs)("div",{className:"px-4 py-2 border-b",style:{borderColor:"#f3f4f6 !important"},children:[(0,d.jsx)("div",{className:"text-sm font-bold",style:{color:"#000000 !important",fontWeight:"bold !important"},children:x.userId}),(0,d.jsx)("div",{className:"text-xs font-semibold",style:{color:"#000000 !important",fontWeight:"600 !important"},children:D(x.role)})]}),(0,d.jsxs)("button",{onClick:()=>{r&&r(),B(!1)},className:"w-full text-left px-4 py-2 text-sm font-semibold hover:bg-gray-100 flex items-center space-x-2",style:{color:"#000000 !important",fontWeight:"600 !important"},children:[(0,d.jsx)(n.A,{className:"h-4 w-4",style:{color:"#000000 !important",fill:"#000000 !important"}}),(0,d.jsx)("span",{style:{color:"#000000 !important"},children:"Profile Settings"})]}),(0,d.jsxs)("button",{onClick:()=>{y(),B(!1)},className:"w-full text-left px-4 py-2 text-sm font-semibold hover:bg-red-50 flex items-center space-x-2",style:{color:"#dc2626 !important",fontWeight:"600 !important"},children:[(0,d.jsx)(o.A,{className:"h-4 w-4",style:{color:"#dc2626 !important",fill:"#dc2626 !important"}}),(0,d.jsx)("span",{style:{color:"#dc2626 !important"},children:"Logout"})]})]})]})]})]})})};var s=c(11860);let t=({isOpen:a,onClose:b,title:c,children:f,size:h="md",showCloseButton:i=!0,className:j=""})=>((0,e.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]),(0,e.useEffect)(()=>{let c=a=>{"Escape"===a.key&&b()};return a&&document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[a,b]),a)?(0,d.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:b}),(0,d.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,d.jsxs)("div",{className:`relative bg-white rounded-2xl shadow-xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[h]} ${j} slide-up`,children:[(c||i)&&(0,d.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c&&(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:c}),i&&(0,d.jsx)(g,{variant:"ghost",size:"sm",onClick:b,icon:(0,d.jsx)(s.A,{className:"h-5 w-5"})})]}),(0,d.jsx)("div",{className:"p-6",children:f})]})})]}):null,u=(0,e.forwardRef)(({items:a=[],activeItem:b,onItemClick:c,className:e="",variant:f="default",showLabels:g=!0,badge:h=null},i)=>{let j=(a=>{switch(a){case"faculty":return{bg:"bg-surface border-default",active:"text-faculty bg-faculty/10",inactive:"text-secondary hover:text-faculty hover:bg-faculty/5"};case"security":return{bg:"bg-surface border-default",active:"text-security bg-security/10",inactive:"text-secondary hover:text-security hover:bg-security/5"};case"hod":return{bg:"bg-surface border-default",active:"text-hod bg-hod/10",inactive:"text-secondary hover:text-hod hover:bg-hod/5"};case"security-head":return{bg:"bg-surface border-default",active:"text-security-head bg-security-head/10",inactive:"text-secondary hover:text-security-head hover:bg-security-head/5"};default:return{bg:"bg-surface border-default",active:"text-primary-600 bg-primary-50",inactive:"text-secondary hover:text-primary hover:bg-primary-50"}}})(f);return(0,d.jsx)("nav",{ref:i,className:`fixed bottom-0 left-0 right-0 ${j.bg} border-t px-2 py-1 safe-area-pb z-50 ${e}`,style:{paddingBottom:"max(0.25rem, env(safe-area-inset-bottom))"},children:(0,d.jsx)("div",{className:"flex items-center justify-around max-w-md mx-auto",children:a.map((a,e)=>{let f=b===a.id,h=a.badge&&a.badge>0;return(0,d.jsxs)("button",{onClick:()=>c?.(a),className:`relative flex flex-col items-center justify-center p-3 rounded-2xl transition-all duration-200 min-w-[60px] ${f?j.active:j.inactive}`,"aria-label":a.label,children:[h&&(0,d.jsx)("div",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-danger text-white text-xs font-bold rounded-full flex items-center justify-center px-1",children:a.badge>99?"99+":a.badge}),(0,d.jsx)("div",{className:`mb-1 ${f?"scale-110":""} transition-transform duration-200`,children:a.icon}),g&&(0,d.jsx)("span",{className:"text-xs font-medium leading-tight text-center",children:a.label})]},a.id||e)})})})});u.displayName="BottomNavigation";let v=u,w=(0,e.forwardRef)(({children:a,variant:b="default",size:c="md",className:e="",...f},g)=>{let h=`inline-flex items-center font-medium rounded-full ${{default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",permanent:"bg-green-100 text-green-800",temporary:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800",available:"bg-gray-100 text-gray-800"}[b]} ${{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"}[c]} ${e}`;return(0,d.jsx)("span",{ref:g,className:h,...f,children:a})});w.displayName="Badge";let x=w;c(82516);var y=c(30036),z=c(51361);let A=(0,y.default)(async()=>{},{loadableGenerated:{modules:["components/ui/QRScannerWrapper.jsx -> ./QRScanner"]},ssr:!1,loading:()=>(0,d.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",children:(0,d.jsxs)(h.A,{className:"w-full max-w-md",padding:"lg",children:[(0,d.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(z.A,{className:"h-5 w-5 text-primary-600"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Loading Scanner..."})]})}),(0,d.jsxs)("div",{className:"p-6 text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Initializing camera scanner..."})]})]})})}),B=a=>{let[b,c]=(0,e.useState)(!1);return((0,e.useEffect)(()=>{c(!0)},[]),b)?(0,d.jsx)(A,{...a}):null};var C=c(5336),D=c(35071),E=c(43649),F=c(96882);let G=(0,e.createContext)(),H=()=>{let a=(0,e.useContext)(G);if(!a)throw Error("useToast must be used within a ToastProvider");return a},I=({children:a})=>{let[b,c]=(0,e.useState)([]),f=(a,b="info",d=5e3)=>{let e=Date.now()+Math.random(),f={id:e,message:a,type:b,duration:d};return c(a=>[...a,f]),d>0&&setTimeout(()=>{g(e)},d),e},g=a=>{c(b=>b.filter(b=>b.id!==a))};return(0,d.jsxs)(G.Provider,{value:{addToast:f,removeToast:g,success:(a,b)=>f(a,"success",b),error:(a,b)=>f(a,"error",b),warning:(a,b)=>f(a,"warning",b),info:(a,b)=>f(a,"info",b)},children:[a,(0,d.jsx)(J,{toasts:b,onRemove:g})]})},J=({toasts:a,onRemove:b})=>0===a.length?null:(0,d.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:a.map(a=>(0,d.jsx)(K,{toast:a,onRemove:b},a.id))}),K=({toast:a,onRemove:b})=>{let[c,f]=(0,e.useState)(!1),[g,h]=(0,e.useState)(!1);(0,e.useEffect)(()=>{let a=setTimeout(()=>f(!0),10);return()=>clearTimeout(a)},[]);let i=()=>{switch(a.type){case"success":return"text-green-800";case"error":return"text-red-800";case"warning":return"text-yellow-800";default:return"text-primary-800"}};return(0,d.jsxs)("div",{className:(()=>{let b="flex items-center p-4 rounded-lg shadow-lg border max-w-sm w-full transition-all duration-300 transform";if(g||!c)return`${b} translate-x-full opacity-0`;switch(a.type){case"success":return`${b} bg-green-50 border-green-200 translate-x-0 opacity-100`;case"error":return`${b} bg-red-50 border-red-200 translate-x-0 opacity-100`;case"warning":return`${b} bg-yellow-50 border-yellow-200 translate-x-0 opacity-100`;default:return`${b} bg-primary-50 border-primary-200 translate-x-0 opacity-100`}})(),children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(a.type){case"success":return(0,d.jsx)(C.A,{className:"h-5 w-5 text-green-600"});case"error":return(0,d.jsx)(D.A,{className:"h-5 w-5 text-red-600"});case"warning":return(0,d.jsx)(E.A,{className:"h-5 w-5 text-yellow-600"});default:return(0,d.jsx)(F.A,{className:"h-5 w-5 text-primary-600"})}})()}),(0,d.jsx)("div",{className:`ml-3 flex-1 ${i()}`,children:(0,d.jsx)("p",{className:"text-sm font-medium",children:a.message})}),(0,d.jsx)("button",{onClick:()=>{h(!0),setTimeout(()=>b(a.id),300)},className:`ml-4 flex-shrink-0 rounded-md p-1.5 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 ${i()}`,children:(0,d.jsx)(s.A,{className:"h-4 w-4"})})]})};var L=c(61066),M=c(21134),N=c(363);let O=({className:a="",size:b="sm",variant:c="ghost",showLabel:e=!1})=>{let{theme:f,toggleTheme:h}=(0,L.DP)(),i="dark"===f;return(0,d.jsx)(g,{variant:c,size:b,onClick:h,className:`transition-all duration-200 ${a}`,icon:i?(0,d.jsx)(M.A,{className:"h-4 w-4"}):(0,d.jsx)(N.A,{className:"h-4 w-4"}),"aria-label":`Switch to ${i?"light":"dark"} mode`,children:e&&(i?"Light":"Dark")})},P=(0,e.forwardRef)(({count:a=0,type:b="default",size:c="md",className:e="",onClick:f,showIcon:g=!0,animate:h=!0,...i},j)=>{if(0===a)return null;let l=a>99?"99+":a.toString();return(0,d.jsx)("div",{ref:j,className:`
        inline-flex items-center justify-center
        ${{sm:"min-w-[16px] h-4 text-xs px-1",md:"min-w-[20px] h-5 text-xs px-1.5",lg:"min-w-[24px] h-6 text-sm px-2"}[c]}
        ${{default:"bg-primary-600 text-white",warning:"bg-warning text-white",danger:"bg-danger text-white",success:"bg-success text-white",info:"bg-info text-white"}[b]}
        rounded-full font-bold
        ${h?"animate-bounce-in":""}
        ${f?"cursor-pointer hover:scale-110 transition-transform":""}
        ${e}
      `,onClick:f,...i,children:g&&1===a?(()=>{switch(b){case"warning":case"danger":return(0,d.jsx)(E.A,{className:"h-3 w-3"});case"success":return(0,d.jsx)(C.A,{className:"h-3 w-3"});case"info":return(0,d.jsx)(F.A,{className:"h-3 w-3"});default:return(0,d.jsx)(k.A,{className:"h-3 w-3"})}})():l})});P.displayName="NotificationBadge";let Q=P;var R=c(88233);let S=({isOpen:a,onClose:b,notifications:c=[],onMarkAsRead:f,onMarkAllAsRead:i,onDeleteNotification:j,userRole:l="faculty"})=>{let[m,n]=(0,e.useState)("all"),o=c.filter(a=>"unread"===m?!a.read:"alerts"!==m||"alert"===a.type||"warning"===a.type),p=c.filter(a=>!a.read).length;return(0,d.jsx)(t,{isOpen:a,onClose:b,title:"Notifications",size:"lg",className:"max-h-[80vh]",children:(0,d.jsxs)("div",{className:"flex flex-col h-full",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-default",children:[(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsxs)(g,{variant:"all"===m?"primary":"ghost",size:"sm",onClick:()=>n("all"),children:["All (",c.length,")"]}),(0,d.jsxs)(g,{variant:"unread"===m?"primary":"ghost",size:"sm",onClick:()=>n("unread"),children:["Unread (",p,")"]}),(0,d.jsx)(g,{variant:"alerts"===m?"primary":"ghost",size:"sm",onClick:()=>n("alerts"),children:"Alerts"})]}),p>0&&(0,d.jsx)(g,{variant:"ghost",size:"sm",onClick:i,children:"Mark all read"})]}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto space-y-3",children:0===o.length?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(k.A,{className:"h-12 w-12 text-muted mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-medium text-primary mb-2",children:"No notifications"}),(0,d.jsx)("p",{className:"text-secondary",children:"unread"===m?"All caught up!":"You have no notifications yet."})]}):o.map(a=>(0,d.jsx)(h.A,{className:`transition-all duration-200 ${!a.read?"border-l-4 border-l-primary-600 bg-primary-50/30":""}`,padding:"sm",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"flex-shrink-0 mt-1",children:(a=>{switch(a){case"alert":return(0,d.jsx)(E.A,{className:"h-5 w-5 text-danger"});case"warning":return(0,d.jsx)(E.A,{className:"h-5 w-5 text-warning"});case"success":return(0,d.jsx)(C.A,{className:"h-5 w-5 text-success"});case"info":return(0,d.jsx)(F.A,{className:"h-5 w-5 text-info"});default:return(0,d.jsx)(k.A,{className:"h-5 w-5 text-primary-600"})}})(a.type)}),(0,d.jsx)("div",{className:"flex-1 min-w-0",children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-primary mb-1",children:a.title}),(0,d.jsx)("p",{className:"text-sm text-secondary mb-2",children:a.message}),(0,d.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted",children:[(0,d.jsx)("span",{children:(a=>{let b=Math.floor((new Date-new Date(a))/6e4);return b<1?"Just now":b<60?`${b}m ago`:b<1440?`${Math.floor(b/60)}h ago`:`${Math.floor(b/1440)}d ago`})(a.timestamp)}),a.category&&(0,d.jsx)("span",{className:"px-2 py-1 bg-surface-secondary rounded-full",children:a.category})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[!a.read&&(0,d.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>f(a.id),className:"text-xs",children:"Mark read"}),(0,d.jsx)(g,{variant:"ghost",size:"sm",onClick:()=>j(a.id),icon:(0,d.jsx)(R.A,{className:"h-3 w-3"}),className:"text-danger hover:bg-danger/10"})]})]})})]})},a.id))})]})})}},51769:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/karthikgurram/projects/innovation/final/key-management/components/Providers.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/karthikgurram/projects/innovation/final/key-management/components/Providers.jsx","default")},61066:(a,b,c)=>{"use strict";c.d(b,{Ay:()=>h,DP:()=>g});var d=c(60687),e=c(43210);let f=(0,e.createContext)({theme:"light",toggleTheme:()=>{},setTheme:()=>{}}),g=()=>{let a=(0,e.useContext)(f);if(!a)throw Error("useTheme must be used within a ThemeProvider");return a},h=({children:a})=>{let[b,c]=(0,e.useState)("light"),[g,h]=(0,e.useState)(!1);return((0,e.useEffect)(()=>{let a=localStorage.getItem("vnr-key-theme"),b=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c(a||b),h(!0)},[]),(0,e.useEffect)(()=>{if(g){let a=document.documentElement;"dark"===b?a.classList.add("dark"):a.classList.remove("dark"),localStorage.setItem("vnr-key-theme",b)}},[b,g]),g)?(0,d.jsx)(f.Provider,{value:{theme:b,toggleTheme:()=>{c(a=>"light"===a?"dark":"light")},setTheme:a=>{c(a)}},children:a}):(0,d.jsx)("div",{style:{visibility:"hidden"},children:a})}},70583:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,16133,23)),Promise.resolve().then(c.t.bind(c,16444,23)),Promise.resolve().then(c.t.bind(c,16042,23)),Promise.resolve().then(c.t.bind(c,49477,23)),Promise.resolve().then(c.t.bind(c,29345,23)),Promise.resolve().then(c.t.bind(c,12089,23)),Promise.resolve().then(c.t.bind(c,46577,23)),Promise.resolve().then(c.t.bind(c,31307,23)),Promise.resolve().then(c.t.bind(c,14817,23))},71810:(a,b,c)=>{Promise.resolve().then(c.bind(c,98715)),Promise.resolve().then(c.bind(c,51769))},82704:()=>{},87646:(a,b,c)=>{"use strict";c.d(b,{A:()=>f});var d=c(60687);let e=(0,c(43210).forwardRef)(({children:a,className:b="",variant:c="default",padding:e="md",shadow:f=!0,hover:g=!1,onClick:h,role:i=null,elevated:j=!1,interactive:k=!1,...l},m)=>{let n={default:"",success:"border-success/30 bg-success-light",warning:"border-warning/30 bg-warning-light",danger:"border-danger/30 bg-danger-light",info:"border-info/30 bg-info-light",primary:"border-primary-200 bg-primary-50",faculty:"border-faculty/30 bg-faculty-light",security:"border-security/30 bg-security-light",hod:"border-hod/30 bg-hod-light","security-head":"border-security-head/30 bg-security-head-light"},o=i?n[i]:"",p=i?"":n[c],q=`bg-surface rounded-2xl border border-default transition-all duration-200 ${p} ${o} ${{none:"",xs:"p-2",sm:"p-3",md:"p-4",lg:"p-6",xl:"p-8"}[e]} ${f?j?"shadow-elevated":"card-shadow":""} ${g||k?"hover:shadow-lg hover:-translate-y-1 cursor-pointer active:scale-[0.98]":""} ${h?"cursor-pointer":""} ${b}`;return(0,d.jsx)("div",{ref:m,className:q,onClick:h,role:k?"button":void 0,tabIndex:k?0:void 0,onKeyDown:k?a=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),h?.(a))}:void 0,...l,children:a})});e.displayName="Card";let f=e},98715:(a,b,c)=>{"use strict";c.d(b,{default:()=>e});var d=c(61369);(0,d.registerClientReference)(function(){throw Error("Attempted to call withErrorBoundary() from the server but withErrorBoundary is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/karthikgurram/projects/innovation/final/key-management/components/ErrorBoundary.jsx","withErrorBoundary"),(0,d.registerClientReference)(function(){throw Error("Attempted to call useErrorHandler() from the server but useErrorHandler is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/karthikgurram/projects/innovation/final/key-management/components/ErrorBoundary.jsx","useErrorHandler");let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/karthikgurram/projects/innovation/final/key-management/components/ErrorBoundary.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/karthikgurram/projects/innovation/final/key-management/components/ErrorBoundary.jsx","default")}};